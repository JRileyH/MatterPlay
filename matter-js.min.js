!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Matter=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vertices"),f=a("../geometry/Vector"),g=a("../core/Sleeping"),i=(a("../render/Render"),a("../core/Common")),j=a("../geometry/Bounds"),k=a("../geometry/Axes");!function(){d._inertiaScale=4,d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,d.create=function(b){var c={id:i.nextId(),type:"body",label:"Body",parts:[],angle:0,vertices:e.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:1.5}},d=i.extend(c,b);return a(d,b),d},d.nextGroup=function(a){return a?d._nextNonCollidingGroupId--:d._nextCollidingGroupId++},d.nextCategory=function(){return d._nextCategory=d._nextCategory<<1,d._nextCategory};var a=function(a,b){b=b||{},d.set(a,{bounds:a.bounds||j.create(a.vertices),positionPrev:a.positionPrev||f.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a}),e.rotate(a.vertices,a.angle,a.position),k.rotate(a.axes,a.angle),j.update(a.bounds,a.vertices,a.velocity),d.set(a,{axes:b.axes||a.axes,area:b.area||a.area,mass:b.mass||a.mass,inertia:b.inertia||a.inertia});var c=a.isStatic?"#eeeeee":i.choose(["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"]),g=i.shadeColor(c,-20);a.render.fillStyle=a.render.fillStyle||c,a.render.strokeStyle=a.render.strokeStyle||g,a.render.sprite.xOffset+=-(a.bounds.min.x-a.position.x)/(a.bounds.max.x-a.bounds.min.x),a.render.sprite.yOffset+=-(a.bounds.min.y-a.position.y)/(a.bounds.max.y-a.bounds.min.y)};d.set=function(a,b,c){var e;"string"==typeof b&&(e=b,b={},b[e]=c);for(e in b)if(c=b[e],b.hasOwnProperty(e))switch(e){case"isStatic":d.setStatic(a,c);break;case"isSleeping":g.set(a,c);break;case"mass":d.setMass(a,c);break;case"density":d.setDensity(a,c);break;case"inertia":d.setInertia(a,c);break;case"vertices":d.setVertices(a,c);break;case"position":d.setPosition(a,c);break;case"angle":d.setAngle(a,c);break;case"velocity":d.setVelocity(a,c);break;case"angularVelocity":d.setAngularVelocity(a,c);break;case"parts":d.setParts(a,c);break;default:a[e]=c}},d.setStatic=function(a,b){for(var c=0;c<a.parts.length;c++){var d=a.parts[c];d.isStatic=b,b&&(d.restitution=0,d.friction=1,d.mass=d.inertia=d.density=1/0,d.inverseMass=d.inverseInertia=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.angularVelocity=0,d.speed=0,d.angularSpeed=0,d.motion=0)}},d.setMass=function(a,b){a.mass=b,a.inverseMass=1/a.mass,a.density=a.mass/a.area},d.setDensity=function(a,b){d.setMass(a,b*a.area),a.density=b},d.setInertia=function(a,b){a.inertia=b,a.inverseInertia=1/a.inertia},d.setVertices=function(a,b){b[0].body===a?a.vertices=b:a.vertices=e.create(b,a),a.axes=k.fromVertices(a.vertices),a.area=e.area(a.vertices),d.setMass(a,a.density*a.area);var c=e.centre(a.vertices);e.translate(a.vertices,c,-1),d.setInertia(a,d._inertiaScale*e.inertia(a.vertices,a.mass)),e.translate(a.vertices,a.position),j.update(a.bounds,a.vertices,a.velocity)},d.setParts=function(a,c,f){var g;for(c=c.slice(0),a.parts.length=0,a.parts.push(a),a.parent=a,g=0;g<c.length;g++){var h=c[g];h!==a&&(h.parent=a,a.parts.push(h))}if(1!==a.parts.length){if(f="undefined"==typeof f||f){var i=[];for(g=0;g<c.length;g++)i=i.concat(c[g].vertices);e.clockwiseSort(i);var j=e.hull(i),k=e.centre(j);d.setVertices(a,j),e.translate(a.vertices,k)}var l=b(a);a.area=l.area,a.parent=a,a.position.x=l.centre.x,a.position.y=l.centre.y,a.positionPrev.x=l.centre.x,a.positionPrev.y=l.centre.y,d.setMass(a,l.mass),d.setInertia(a,l.inertia),d.setPosition(a,l.centre)}},d.setPosition=function(a,b){var c=f.sub(b,a.position);a.positionPrev.x+=c.x,a.positionPrev.y+=c.y;for(var d=0;d<a.parts.length;d++){var g=a.parts[d];g.position.x+=c.x,g.position.y+=c.y,e.translate(g.vertices,c),j.update(g.bounds,g.vertices,a.velocity)}},d.setAngle=function(a,b){var c=b-a.angle;a.anglePrev+=c;for(var d=0;d<a.parts.length;d++){var g=a.parts[d];g.angle+=c,e.rotate(g.vertices,c,a.position),k.rotate(g.axes,c),j.update(g.bounds,g.vertices,a.velocity),d>0&&f.rotateAbout(g.position,c,a.position,g.position)}},d.setVelocity=function(a,b){a.positionPrev.x=a.position.x-b.x,a.positionPrev.y=a.position.y-b.y,a.velocity.x=b.x,a.velocity.y=b.y,a.speed=f.magnitude(a.velocity)},d.setAngularVelocity=function(a,b){a.anglePrev=a.angle-b,a.angularVelocity=b,a.angularSpeed=Math.abs(a.angularVelocity)},d.translate=function(a,b){d.setPosition(a,f.add(a.position,b))},d.rotate=function(a,b){d.setAngle(a,a.angle+b)},d.scale=function(a,c,f,g){for(var h=0;h<a.parts.length;h++){var i=a.parts[h];e.scale(i.vertices,c,f,a.position),i.axes=k.fromVertices(i.vertices),a.isStatic||(i.area=e.area(i.vertices),d.setMass(i,a.density*i.area),e.translate(i.vertices,{x:-i.position.x,y:-i.position.y}),d.setInertia(i,e.inertia(i.vertices,i.mass)),e.translate(i.vertices,{x:i.position.x,y:i.position.y})),j.update(i.bounds,i.vertices,a.velocity)}if(a.circleRadius&&(c===f?a.circleRadius*=c:a.circleRadius=null),!a.isStatic){var l=b(a);a.area=l.area,d.setMass(a,l.mass),d.setInertia(a,l.inertia)}},d.update=function(a,b,c,d){var g=Math.pow(b*c*a.timeScale,2),h=1-a.frictionAir*c*a.timeScale,i=a.position.x-a.positionPrev.x,l=a.position.y-a.positionPrev.y;a.velocity.x=i*h*d+a.force.x/a.mass*g,a.velocity.y=l*h*d+a.force.y/a.mass*g,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.angularVelocity=(a.angle-a.anglePrev)*h*d+a.torque/a.inertia*g,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=f.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var m=0;m<a.parts.length;m++){var n=a.parts[m];e.translate(n.vertices,a.velocity),m>0&&(n.position.x+=a.velocity.x,n.position.y+=a.velocity.y),0!==a.angularVelocity&&(e.rotate(n.vertices,a.angularVelocity,a.position),k.rotate(n.axes,a.angularVelocity),m>0&&f.rotateAbout(n.position,a.angularVelocity,a.position,n.position)),j.update(n.bounds,n.vertices,a.velocity)}},d.applyForce=function(a,b,c){a.force.x+=c.x,a.force.y+=c.y;var d={x:b.x-a.position.x,y:b.y-a.position.y};a.torque+=d.x*c.y-d.y*c.x};var b=function(a){for(var b={mass:0,area:0,inertia:0,centre:{x:0,y:0}},c=1===a.parts.length?0:1;c<a.parts.length;c++){var d=a.parts[c];b.mass+=d.mass,b.area+=d.area,b.inertia+=d.inertia,b.centre=f.add(b.centre,f.mult(d.position,d.mass!==1/0?d.mass:1))}return b.centre=f.div(b.centre,b.mass!==1/0?b.mass:a.parts.length),b}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(a,b,c){var d={};b.exports=d;var e=a("../core/Events"),f=a("../core/Common"),g=a("./Body");!function(){d.create=function(a){return f.extend({id:f.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite"},a)},d.setModified=function(a,b,c,e){if(a.isModified=b,c&&a.parent&&d.setModified(a.parent,b,c,e),e)for(var f=0;f<a.composites.length;f++){var g=a.composites[f];d.setModified(g,b,c,e)}},d.add=function(a,b){var c=[].concat(b);e.trigger(a,"beforeAdd",{object:b});for(var g=0;g<c.length;g++){var h=c[g];switch(h.type){case"body":if(h.parent!==h){f.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(a,h);break;case"constraint":d.addConstraint(a,h);break;case"composite":d.addComposite(a,h);break;case"mouseConstraint":d.addConstraint(a,h.constraint)}}return e.trigger(a,"afterAdd",{object:b}),a},d.remove=function(a,b,c){var f=[].concat(b);e.trigger(a,"beforeRemove",{object:b});for(var g=0;g<f.length;g++){var h=f[g];switch(h.type){case"body":d.removeBody(a,h,c);break;case"constraint":d.removeConstraint(a,h,c);break;case"composite":d.removeComposite(a,h,c);break;case"mouseConstraint":d.removeConstraint(a,h.constraint)}}return e.trigger(a,"afterRemove",{object:b}),a},d.addComposite=function(a,b){return a.composites.push(b),b.parent=a,d.setModified(a,!0,!0,!1),a},d.removeComposite=function(a,b,c){var e=f.indexOf(a.composites,b);if(e!==-1&&(d.removeCompositeAt(a,e),d.setModified(a,!0,!0,!1)),c)for(var g=0;g<a.composites.length;g++)d.removeComposite(a.composites[g],b,!0);return a},d.removeCompositeAt=function(a,b){return a.composites.splice(b,1),d.setModified(a,!0,!0,!1),a},d.addBody=function(a,b){return a.bodies.push(b),d.setModified(a,!0,!0,!1),a},d.removeBody=function(a,b,c){var e=f.indexOf(a.bodies,b);if(e!==-1&&(d.removeBodyAt(a,e),d.setModified(a,!0,!0,!1)),c)for(var g=0;g<a.composites.length;g++)d.removeBody(a.composites[g],b,!0);return a},d.removeBodyAt=function(a,b){return a.bodies.splice(b,1),d.setModified(a,!0,!0,!1),a},d.addConstraint=function(a,b){return a.constraints.push(b),d.setModified(a,!0,!0,!1),a},d.removeConstraint=function(a,b,c){var e=f.indexOf(a.constraints,b);if(e!==-1&&d.removeConstraintAt(a,e),c)for(var g=0;g<a.composites.length;g++)d.removeConstraint(a.composites[g],b,!0);return a},d.removeConstraintAt=function(a,b){return a.constraints.splice(b,1),d.setModified(a,!0,!0,!1),a},d.clear=function(a,b,c){if(c)for(var e=0;e<a.composites.length;e++)d.clear(a.composites[e],b,!0);return b?a.bodies=a.bodies.filter(function(a){return a.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,d.setModified(a,!0,!0,!1),a},d.allBodies=function(a){for(var b=[].concat(a.bodies),c=0;c<a.composites.length;c++)b=b.concat(d.allBodies(a.composites[c]));return b},d.allConstraints=function(a){for(var b=[].concat(a.constraints),c=0;c<a.composites.length;c++)b=b.concat(d.allConstraints(a.composites[c]));return b},d.allComposites=function(a){for(var b=[].concat(a.composites),c=0;c<a.composites.length;c++)b=b.concat(d.allComposites(a.composites[c]));return b},d.get=function(a,b,c){var e,f;switch(c){case"body":e=d.allBodies(a);break;case"constraint":e=d.allConstraints(a);break;case"composite":e=d.allComposites(a).concat(a)}return e?(f=e.filter(function(a){return a.id.toString()===b.toString()}),0===f.length?null:f[0]):null},d.move=function(a,b,c){return d.remove(a,b),d.add(c,b),a},d.rebase=function(a){for(var b=d.allBodies(a).concat(d.allConstraints(a)).concat(d.allComposites(a)),c=0;c<b.length;c++)b[c].id=f.nextId();return d.setModified(a,!0,!0,!1),a},d.translate=function(a,b,c){for(var e=c?d.allBodies(a):a.bodies,f=0;f<e.length;f++)g.translate(e[f],b);return d.setModified(a,!0,!0,!1),a},d.rotate=function(a,b,c,e){for(var f=Math.cos(b),h=Math.sin(b),i=e?d.allBodies(a):a.bodies,j=0;j<i.length;j++){var k=i[j],l=k.position.x-c.x,m=k.position.y-c.y;g.setPosition(k,{x:c.x+(l*f-m*h),y:c.y+(l*h+m*f)}),g.rotate(k,b)}return d.setModified(a,!0,!0,!1),a},d.scale=function(a,b,c,e,f){for(var h=f?d.allBodies(a):a.bodies,i=0;i<h.length;i++){var j=h[i],k=j.position.x-e.x,l=j.position.y-e.y;g.setPosition(j,{x:e.x+k*b,y:e.y+l*c}),g.scale(j,b,c)}return d.setModified(a,!0,!0,!1),a}}()},{"../core/Common":14,"../core/Events":16,"./Body":1}],3:[function(a,b,c){var d={};b.exports=d;var e=a("./Composite"),g=(a("../constraint/Constraint"),a("../core/Common"));!function(){d.create=function(a){var b=e.create(),c={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-(1/0),y:-(1/0)},max:{x:1/0,y:1/0}}};return g.extend(b,c,a)}}()},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(a,b,c){var d={};b.exports=d,function(){d.create=function(a){return{id:d.id(a),vertex:a,normalImpulse:0,tangentImpulse:0}},d.id=function(a){return a.body.id+"_"+a.index}}()},{}],5:[function(a,b,c){var d={};b.exports=d;var e=a("./SAT"),f=a("./Pair"),g=a("../geometry/Bounds");!function(){d.collisions=function(a,b){for(var c=[],h=b.pairs.table,i=0;i<a.length;i++){var j=a[i][0],k=a[i][1];if((!j.isStatic&&!j.isSleeping||!k.isStatic&&!k.isSleeping)&&d.canCollide(j.collisionFilter,k.collisionFilter)&&g.overlaps(j.bounds,k.bounds))for(var l=j.parts.length>1?1:0;l<j.parts.length;l++)for(var m=j.parts[l],n=k.parts.length>1?1:0;n<k.parts.length;n++){var o=k.parts[n];if(m===j&&o===k||g.overlaps(m.bounds,o.bounds)){var r,p=f.id(m,o),q=h[p];r=q&&q.isActive?q.collision:null;var s=e.collides(m,o,r);s.collided&&c.push(s)}}}return c},d.canCollide=function(a,b){return a.group===b.group&&0!==a.group?a.group>0:0!==(a.mask&b.category)&&0!==(b.mask&a.category)}}()},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(a,b,c){var d={};b.exports=d;var e=a("./Pair"),f=a("./Detector"),g=a("../core/Common");!function(){d.create=function(a){var b={controller:d,detector:f.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return g.extend(b,a)},d.update=function(c,d,e,f){var g,m,n,q,r,o=e.world,p=c.buckets,s=!1;for(g=0;g<d.length;g++){var t=d[g];if((!t.isSleeping||f)&&!(t.bounds.max.x<o.bounds.min.x||t.bounds.min.x>o.bounds.max.x||t.bounds.max.y<o.bounds.min.y||t.bounds.min.y>o.bounds.max.y)){var u=b(c,t);if(!t.region||u.id!==t.region.id||f){t.region&&!f||(t.region=u);var v=a(u,t.region);for(m=v.startCol;m<=v.endCol;m++)for(n=v.startRow;n<=v.endRow;n++){r=h(m,n),q=p[r];var w=m>=u.startCol&&m<=u.endCol&&n>=u.startRow&&n<=u.endRow,x=m>=t.region.startCol&&m<=t.region.endCol&&n>=t.region.startRow&&n<=t.region.endRow;!w&&x&&x&&q&&k(c,q,t),(t.region===u||w&&!x||f)&&(q||(q=i(p,r)),j(c,q,t))}t.region=u,s=!0}}}s&&(c.pairsList=l(c))},d.clear=function(a){a.buckets={},a.pairs={},a.pairsList=[]};var a=function(a,b){var d=Math.min(a.startCol,b.startCol),e=Math.max(a.endCol,b.endCol),f=Math.min(a.startRow,b.startRow),g=Math.max(a.endRow,b.endRow);return c(d,e,f,g)},b=function(a,b){var d=b.bounds,e=Math.floor(d.min.x/a.bucketWidth),f=Math.floor(d.max.x/a.bucketWidth),g=Math.floor(d.min.y/a.bucketHeight),h=Math.floor(d.max.y/a.bucketHeight);return c(e,f,g,h)},c=function(a,b,c,d){return{id:a+","+b+","+c+","+d,startCol:a,endCol:b,startRow:c,endRow:d}},h=function(a,b){return a+","+b},i=function(a,b){var c=a[b]=[];return c},j=function(a,b,c){for(var d=0;d<b.length;d++){var f=b[d];if(!(c.id===f.id||c.isStatic&&f.isStatic)){var g=e.id(c,f),h=a.pairs[g];h?h[2]+=1:a.pairs[g]=[c,f,1]}}b.push(c)},k=function(a,b,c){b.splice(g.indexOf(b,c),1);for(var d=0;d<b.length;d++){var f=b[d],h=e.id(c,f),i=a.pairs[h];i&&(i[2]-=1)}},l=function(a){var b,c,d=[];b=g.keys(a.pairs);for(var e=0;e<b.length;e++)c=a.pairs[b[e]],c[2]>0?d.push(c):delete a.pairs[b[e]];return d}}()},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(a,b,c){var d={};b.exports=d;var e=a("./Contact");!function(){d.create=function(a,b){var c=a.bodyA,e=a.bodyB,f=a.parentA,g=a.parentB,h={id:d.id(c,e),bodyA:c,bodyB:e,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:c.isSensor||e.isSensor,timeCreated:b,timeUpdated:b,inverseMass:f.inverseMass+g.inverseMass,friction:Math.min(f.friction,g.friction),frictionStatic:Math.max(f.frictionStatic,g.frictionStatic),restitution:Math.max(f.restitution,g.restitution),slop:Math.max(f.slop,g.slop)};return d.update(h,a,b),h},d.update=function(a,b,c){var f=a.contacts,g=b.supports,h=a.activeContacts,i=b.parentA,j=b.parentB;if(a.collision=b,a.inverseMass=i.inverseMass+j.inverseMass,a.friction=Math.min(i.friction,j.friction),a.frictionStatic=Math.max(i.frictionStatic,j.frictionStatic),a.restitution=Math.max(i.restitution,j.restitution),a.slop=Math.max(i.slop,j.slop),h.length=0,b.collided){for(var k=0;k<g.length;k++){var l=g[k],m=e.id(l),n=f[m];n?h.push(n):h.push(f[m]=e.create(l))}a.separation=b.depth,d.setActive(a,!0,c)}else a.isActive===!0&&d.setActive(a,!1,c)},d.setActive=function(a,b,c){b?(a.isActive=!0,a.timeUpdated=c):(a.isActive=!1,a.activeContacts.length=0)},d.id=function(a,b){return a.id<b.id?a.id+"_"+b.id:b.id+"_"+a.id}}()},{"./Contact":4}],8:[function(a,b,c){var d={};b.exports=d;var e=a("./Pair"),f=a("../core/Common");!function(){var a=1e3;d.create=function(a){return f.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},d.update=function(a,b,c){var l,m,n,o,d=a.list,g=a.table,h=a.collisionStart,i=a.collisionEnd,j=a.collisionActive,k=[];for(h.length=0,i.length=0,j.length=0,o=0;o<b.length;o++)l=b[o],l.collided&&(m=e.id(l.bodyA,l.bodyB),k.push(m),n=g[m],n?(n.isActive?j.push(n):h.push(n),e.update(n,l,c)):(n=e.create(l,c),g[m]=n,h.push(n),d.push(n)));for(o=0;o<d.length;o++)n=d[o],n.isActive&&f.indexOf(k,n.id)===-1&&(e.setActive(n,!1,c),i.push(n))},d.removeOld=function(b,c){var g,h,i,j,d=b.list,e=b.table,f=[];for(j=0;j<d.length;j++)g=d[j],h=g.collision,h.bodyA.isSleeping||h.bodyB.isSleeping?g.timeUpdated=c:c-g.timeUpdated>a&&f.push(j);for(j=0;j<f.length;j++)i=f[j]-j,g=d[i],delete e[g.id],d.splice(i,1)},d.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}}()},{"../core/Common":14,"./Pair":7}],9:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vector"),f=a("./SAT"),g=a("../geometry/Bounds"),h=a("../factory/Bodies"),i=a("../geometry/Vertices");!function(){d.ray=function(a,b,c,d){d=d||1e-100;for(var i=e.angle(b,c),j=e.magnitude(e.sub(b,c)),k=.5*(c.x+b.x),l=.5*(c.y+b.y),m=h.rectangle(k,l,j,d,{angle:i}),n=[],o=0;o<a.length;o++){var p=a[o];if(g.overlaps(p.bounds,m.bounds))for(var q=1===p.parts.length?0:1;q<p.parts.length;q++){var r=p.parts[q];if(g.overlaps(r.bounds,m.bounds)){var s=f.collides(r,m);if(s.collided){s.body=s.bodyA=s.bodyB=p,n.push(s);break}}}}return n},d.region=function(a,b,c){for(var d=[],e=0;e<a.length;e++){var f=a[e],h=g.overlaps(f.bounds,b);(h&&!c||!h&&c)&&d.push(f)}return d},d.point=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];if(g.contains(e.bounds,b))for(var f=1===e.parts.length?0:1;f<e.parts.length;f++){var h=e.parts[f];if(g.contains(h.bounds,b)&&i.contains(h.vertices,b)){c.push(e);break}}}return c}}()},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vertices"),f=a("../geometry/Vector"),g=a("../core/Common"),h=a("../geometry/Bounds");!function(){d._restingThresh=4,d._restingThreshTangent=6,d._positionDampen=.9,d._positionWarming=.8,d._frictionNormalMultiplier=5,d.preSolvePosition=function(a){var b,c,d;for(b=0;b<a.length;b++)c=a[b],c.isActive&&(d=c.activeContacts.length,c.collision.parentA.totalContacts+=d,c.collision.parentB.totalContacts+=d)},d.solvePosition=function(a,b){var c,e,g,h,i,j,k,l,m,o=f._temp[0],p=f._temp[1],q=f._temp[2],r=f._temp[3];for(c=0;c<a.length;c++)e=a[c],e.isActive&&!e.isSensor&&(g=e.collision,h=g.parentA,i=g.parentB,j=g.normal,k=f.sub(f.add(i.positionImpulse,i.position,o),f.add(h.positionImpulse,f.sub(i.position,g.penetration,p),q),r),e.separation=f.dot(j,k));for(c=0;c<a.length;c++)e=a[c],!e.isActive||e.isSensor||e.separation<0||(g=e.collision,h=g.parentA,i=g.parentB,j=g.normal,m=(e.separation-e.slop)*b,(h.isStatic||i.isStatic)&&(m*=2),h.isStatic||h.isSleeping||(l=d._positionDampen/h.totalContacts,h.positionImpulse.x+=j.x*m*l,h.positionImpulse.y+=j.y*m*l),i.isStatic||i.isSleeping||(l=d._positionDampen/i.totalContacts,i.positionImpulse.x-=j.x*m*l,i.positionImpulse.y-=j.y*m*l))},d.postSolvePosition=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.totalContacts=0,0!==c.positionImpulse.x||0!==c.positionImpulse.y){for(var g=0;g<c.parts.length;g++){var i=c.parts[g];e.translate(i.vertices,c.positionImpulse),h.update(i.bounds,i.vertices,c.velocity),i.position.x+=c.positionImpulse.x,i.position.y+=c.positionImpulse.y}c.positionPrev.x+=c.positionImpulse.x,c.positionPrev.y+=c.positionImpulse.y,f.dot(c.positionImpulse,c.velocity)<0?(c.positionImpulse.x=0,c.positionImpulse.y=0):(c.positionImpulse.x*=d._positionWarming,c.positionImpulse.y*=d._positionWarming)}}},d.preSolveVelocity=function(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q=f._temp[0],r=f._temp[1];for(b=0;b<a.length;b++)if(d=a[b],d.isActive&&!d.isSensor)for(e=d.activeContacts,g=d.collision,h=g.parentA,i=g.parentB,j=g.normal,k=g.tangent,c=0;c<e.length;c++)l=e[c],m=l.vertex,n=l.normalImpulse,o=l.tangentImpulse,0===n&&0===o||(q.x=j.x*n+k.x*o,q.y=j.y*n+k.y*o,h.isStatic||h.isSleeping||(p=f.sub(m,h.position,r),h.positionPrev.x+=q.x*h.inverseMass,h.positionPrev.y+=q.y*h.inverseMass,h.anglePrev+=f.cross(p,q)*h.inverseInertia),i.isStatic||i.isSleeping||(p=f.sub(m,i.position,r),i.positionPrev.x-=q.x*i.inverseMass,i.positionPrev.y-=q.y*i.inverseMass,i.anglePrev-=f.cross(p,q)*i.inverseInertia))},d.solveVelocity=function(a,b){for(var c=b*b,e=f._temp[0],h=f._temp[1],i=f._temp[2],j=f._temp[3],k=f._temp[4],l=f._temp[5],m=0;m<a.length;m++){var n=a[m];if(n.isActive&&!n.isSensor){var o=n.collision,p=o.parentA,q=o.parentB,r=o.normal,s=o.tangent,t=n.activeContacts,u=1/t.length;p.velocity.x=p.position.x-p.positionPrev.x,p.velocity.y=p.position.y-p.positionPrev.y,q.velocity.x=q.position.x-q.positionPrev.x,q.velocity.y=q.position.y-q.positionPrev.y,p.angularVelocity=p.angle-p.anglePrev,q.angularVelocity=q.angle-q.anglePrev;for(var v=0;v<t.length;v++){var w=t[v],x=w.vertex,y=f.sub(x,p.position,h),z=f.sub(x,q.position,i),A=f.add(p.velocity,f.mult(f.perp(y),p.angularVelocity),j),B=f.add(q.velocity,f.mult(f.perp(z),q.angularVelocity),k),C=f.sub(A,B,l),D=f.dot(r,C),E=f.dot(s,C),F=Math.abs(E),G=g.sign(E),H=(1+n.restitution)*D,I=g.clamp(n.separation+D,0,1)*d._frictionNormalMultiplier,J=E,K=1/0;F>n.friction*n.frictionStatic*I*c&&(K=F,J=g.clamp(n.friction*G*c,-K,K));var L=f.cross(y,r),M=f.cross(z,r),N=u/(p.inverseMass+q.inverseMass+p.inverseInertia*L*L+q.inverseInertia*M*M);if(H*=N,J*=N,D<0&&D*D>d._restingThresh*c)w.normalImpulse=0;else{var O=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+H,0),H=w.normalImpulse-O}if(E*E>d._restingThreshTangent*c)w.tangentImpulse=0;else{var P=w.tangentImpulse;w.tangentImpulse=g.clamp(w.tangentImpulse+J,-K,K),J=w.tangentImpulse-P}e.x=r.x*H+s.x*J,e.y=r.y*H+s.y*J,p.isStatic||p.isSleeping||(p.positionPrev.x+=e.x*p.inverseMass,p.positionPrev.y+=e.y*p.inverseMass,p.anglePrev+=f.cross(y,e)*p.inverseInertia),q.isStatic||q.isSleeping||(q.positionPrev.x-=e.x*q.inverseMass,q.positionPrev.y-=e.y*q.inverseMass,q.anglePrev-=f.cross(z,e)*q.inverseInertia)}}}}}()},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vertices"),f=a("../geometry/Vector");!function(){d.collides=function(b,d,g){var h,i,j,k,l=g,m=!1;if(l){var n=b.parent,o=d.parent,p=n.speed*n.speed+n.angularSpeed*n.angularSpeed+o.speed*o.speed+o.angularSpeed*o.angularSpeed;m=l&&l.collided&&p<.2,k=l}else k={collided:!1,bodyA:b,bodyB:d};if(l&&m){var q=k.axisBody,r=q===b?d:b,s=[q.axes[l.axisNumber]];if(j=a(q.vertices,r.vertices,s),k.reused=!0,j.overlap<=0)return k.collided=!1,k}else{if(h=a(b.vertices,d.vertices,b.axes),h.overlap<=0)return k.collided=!1,k;if(i=a(d.vertices,b.vertices,d.axes),i.overlap<=0)return k.collided=!1,k;h.overlap<i.overlap?(j=h,k.axisBody=b):(j=i,k.axisBody=d),k.axisNumber=j.axisNumber}k.bodyA=b.id<d.id?b:d,k.bodyB=b.id<d.id?d:b,k.collided=!0,k.normal=j.axis,k.depth=j.overlap,k.parentA=k.bodyA.parent,k.parentB=k.bodyB.parent,b=k.bodyA,d=k.bodyB,f.dot(k.normal,f.sub(d.position,b.position))>0&&(k.normal=f.neg(k.normal)),k.tangent=f.perp(k.normal),k.penetration={x:k.normal.x*k.depth,y:k.normal.y*k.depth};var t=c(b,d,k.normal),u=k.supports||[];if(u.length=0,e.contains(b.vertices,t[0])&&u.push(t[0]),e.contains(b.vertices,t[1])&&u.push(t[1]),u.length<2){var v=c(d,b,f.neg(k.normal));e.contains(d.vertices,v[0])&&u.push(v[0]),u.length<2&&e.contains(d.vertices,v[1])&&u.push(v[1])}return u.length<1&&(u=[t[0]]),k.supports=u,k};var a=function(a,c,d){for(var i,j,e=f._temp[0],g=f._temp[1],h={overlap:Number.MAX_VALUE},k=0;k<d.length;k++){if(j=d[k],b(e,a,j),b(g,c,j),i=Math.min(e.max-g.min,g.max-e.min),i<=0)return h.overlap=i,h;i<h.overlap&&(h.overlap=i,h.axis=j,h.axisNumber=k)}return h},b=function(a,b,c){for(var d=f.dot(b[0],c),e=d,g=1;g<b.length;g+=1){var h=f.dot(b[g],c);h>e?e=h:h<d&&(d=h)}a.min=d,a.max=e},c=function(a,b,c){for(var i,j,k,l,d=Number.MAX_VALUE,e=f._temp[0],g=b.vertices,h=a.position,m=0;m<g.length;m++)j=g[m],e.x=j.x-h.x,e.y=j.y-h.y,i=-f.dot(c,e),i<d&&(d=i,k=j);var n=k.index-1>=0?k.index-1:g.length-1;j=g[n],e.x=j.x-h.x,e.y=j.y-h.y,d=-f.dot(c,e),l=j;var o=(k.index+1)%g.length;return j=g[o],e.x=j.x-h.x,e.y=j.y-h.y,i=-f.dot(c,e),i<d&&(l=j),[k,l]}}()},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vertices"),f=a("../geometry/Vector"),g=a("../core/Sleeping"),h=a("../geometry/Bounds"),i=a("../geometry/Axes"),j=a("../core/Common");!function(){var a=1e-6,b=.001;d.create=function(b){var c=b;c.bodyA&&!c.pointA&&(c.pointA={x:0,y:0}),c.bodyB&&!c.pointB&&(c.pointB={x:0,y:0});var d=c.bodyA?f.add(c.bodyA.position,c.pointA):c.pointA,e=c.bodyB?f.add(c.bodyB.position,c.pointB):c.pointB,g=f.magnitude(f.sub(d,e));c.length=c.length||g||a;var h={visible:!0,lineWidth:2,strokeStyle:"#666"};return c.render=j.extend(h,c.render),c.id=c.id||j.nextId(),c.label=c.label||"Constraint",c.type="constraint",c.stiffness=c.stiffness||1,c.angularStiffness=c.angularStiffness||0,c.angleA=c.bodyA?c.bodyA.angle:c.angleA,c.angleB=c.bodyB?c.bodyB.angle:c.angleB,c},d.solveAll=function(a,b){for(var c=0;c<a.length;c++)d.solve(a[c],b)},d.solve=function(c,d){var e=c.bodyA,g=c.bodyB,h=c.pointA,i=c.pointB;e&&!e.isStatic&&(c.pointA=f.rotate(h,e.angle-c.angleA),c.angleA=e.angle),g&&!g.isStatic&&(c.pointB=f.rotate(i,g.angle-c.angleB),c.angleB=g.angle);var j=h,k=i;if(e&&(j=f.add(e.position,h)),g&&(k=f.add(g.position,i)),j&&k){var l=f.sub(j,k),m=f.magnitude(l);0===m&&(m=a);var n=(m-c.length)/m,o=f.div(l,m),p=f.mult(l,.5*n*c.stiffness*d*d);if(!(Math.abs(1-m/c.length)<b*d)){var q,r,s,t,u,v,w,x;e&&!e.isStatic?(s={x:j.x-e.position.x+p.x,y:j.y-e.position.y+p.y},e.velocity.x=e.position.x-e.positionPrev.x,e.velocity.y=e.position.y-e.positionPrev.y,e.angularVelocity=e.angle-e.anglePrev,q=f.add(e.velocity,f.mult(f.perp(s),e.angularVelocity)),u=f.dot(s,o),w=e.inverseMass+e.inverseInertia*u*u):(q={x:0,y:0},w=e?e.inverseMass:0),g&&!g.isStatic?(t={x:k.x-g.position.x-p.x,y:k.y-g.position.y-p.y},g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,g.angularVelocity=g.angle-g.anglePrev,r=f.add(g.velocity,f.mult(f.perp(t),g.angularVelocity)),v=f.dot(t,o),x=g.inverseMass+g.inverseInertia*v*v):(r={x:0,y:0},x=g?g.inverseMass:0);var y=f.sub(r,q),z=f.dot(o,y)/(w+x);z>0&&(z=0);var B,A={x:o.x*z,y:o.y*z};e&&!e.isStatic&&(B=f.cross(s,A)*e.inverseInertia*(1-c.angularStiffness),e.constraintImpulse.x-=p.x,e.constraintImpulse.y-=p.y,e.constraintImpulse.angle+=B,e.position.x-=p.x,e.position.y-=p.y,e.angle+=B),g&&!g.isStatic&&(B=f.cross(t,A)*g.inverseInertia*(1-c.angularStiffness),g.constraintImpulse.x+=p.x,g.constraintImpulse.y+=p.y,g.constraintImpulse.angle-=B,g.position.x+=p.x,g.position.y+=p.y,g.angle-=B)}}},d.postSolveAll=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.constraintImpulse;if(0!==d.x||0!==d.y||0!==d.angle){g.set(c,!1);for(var j=0;j<c.parts.length;j++){var k=c.parts[j];e.translate(k.vertices,d),j>0&&(k.position.x+=d.x,k.position.y+=d.y),0!==d.angle&&(e.rotate(k.vertices,d.angle,c.position),i.rotate(k.axes,d.angle),j>0&&f.rotateAbout(k.position,d.angle,c.position,k.position)),h.update(k.bounds,k.vertices,c.velocity)}d.angle=0,d.x=0,d.y=0}}}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vertices"),f=a("../core/Sleeping"),g=a("../core/Mouse"),h=a("../core/Events"),i=a("../collision/Detector"),j=a("./Constraint"),k=a("../body/Composite"),l=a("../core/Common"),m=a("../geometry/Bounds");!function(){d.create=function(b,c){var e=(b?b.mouse:null)||(c?c.mouse:null);e||(b&&b.render&&b.render.canvas?e=g.create(b.render.canvas):c&&c.element?e=g.create(c.element):(e=g.create(),l.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var f=j.create({label:"Mouse Constraint",pointA:e.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),i={type:"mouseConstraint",mouse:e,element:null,body:null,constraint:f,collisionFilter:{category:1,mask:4294967295,group:0}},m=l.extend(i,c);return h.on(b,"tick",function(){var c=k.allBodies(b.world);d.update(m,c),a(m)}),m},d.update=function(a,b){var c=a.mouse,d=a.constraint,g=a.body;if(0===c.button){if(d.bodyB)f.set(d.bodyB,!1),d.pointA=c.position;else for(var j=0;j<b.length;j++)if(g=b[j],m.contains(g.bounds,c.position)&&i.canCollide(g.collisionFilter,a.collisionFilter))for(var k=g.parts.length>1?1:0;k<g.parts.length;k++){var l=g.parts[k];if(e.contains(l.vertices,c.position)){d.pointA=c.position,d.bodyB=a.body=g,d.pointB={x:c.position.x-g.position.x,y:c.position.y-g.position.y},d.angleB=g.angle,f.set(g,!1),h.trigger(a,"startdrag",{mouse:c,body:g});break}}}else d.bodyB=a.body=null,d.pointB=null,g&&h.trigger(a,"enddrag",{mouse:c,body:g})};var a=function(a){var b=a.mouse,c=b.sourceEvents;c.mousemove&&h.trigger(a,"mousemove",{mouse:b}),c.mousedown&&h.trigger(a,"mousedown",{mouse:b}),c.mouseup&&h.trigger(a,"mouseup",{mouse:b}),g.clearSourceEvents(b)}}()},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(a,b,c){var d={};b.exports=d,function(){d._nextId=0,d._seed=0,d.extend=function(a,b){var c,e,f;"boolean"==typeof b?(c=2,f=b):(c=1,f=!0),e=Array.prototype.slice.call(arguments,c);for(var g=0;g<e.length;g++){var h=e[g];if(h)for(var i in h)f&&h[i]&&h[i].constructor===Object?a[i]&&a[i].constructor!==Object?a[i]=h[i]:(a[i]=a[i]||{},d.extend(a[i],f,h[i])):a[i]=h[i]}return a},d.clone=function(a,b){return d.extend({},b,a)},d.keys=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)b.push(c);return b},d.values=function(a){var b=[];if(Object.keys){for(var c=Object.keys(a),d=0;d<c.length;d++)b.push(a[c[d]]);return b}for(var e in a)b.push(a[e]);return b},d.get=function(a,b,c,d){b=b.split(".").slice(c,d);for(var e=0;e<b.length;e+=1)a=a[b[e]];return a},d.set=function(a,b,c,e,f){var g=b.split(".").slice(e,f);return d.get(a,b,0,-1)[g[g.length-1]]=c,c},d.shadeColor=function(a,b){var c=parseInt(a.slice(1),16),d=Math.round(2.55*b),e=(c>>16)+d,f=(c>>8&255)+d,g=(255&c)+d;return"#"+(16777216+65536*(e<255?e<1?0:e:255)+256*(f<255?f<1?0:f:255)+(g<255?g<1?0:g:255)).toString(16).slice(1)},d.shuffle=function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(d.random()*(b+1)),e=a[b];a[b]=a[c],a[c]=e}return a},d.choose=function(a){return a[Math.floor(d.random()*a.length)]},d.isElement=function(a){try{return a instanceof HTMLElement}catch(b){return"object"==typeof a&&1===a.nodeType&&"object"==typeof a.style&&"object"==typeof a.ownerDocument}},d.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a);
},d.isFunction=function(a){return"function"==typeof a},d.isPlainObject=function(a){return"object"==typeof a&&a.constructor===Object},d.isString=function(a){return"[object String]"===toString.call(a)},d.clamp=function(a,b,c){return a<b?b:a>c?c:a},d.sign=function(a){return a<0?-1:1},d.now=function(){var a=window.performance||{};return a.now=function(){return a.now||a.webkitNow||a.msNow||a.oNow||a.mozNow||function(){return+new Date}}(),a.now()},d.random=function(b,c){return b="undefined"!=typeof b?b:0,c="undefined"!=typeof c?c:1,b+a()*(c-b)};var a=function(){return d._seed=(9301*d._seed+49297)%233280,d._seed/233280};d.colorToNumber=function(a){return a=a.replace("#",""),3==a.length&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.nextId=function(){return d._nextId++},d.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},d.map=function(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d+=1)c.push(b(a[d]));return c},d.topologicalSort=function(a){var c=[],d=[],e=[];for(var f in a)d[f]||e[f]||b(f,d,e,a,c);return c};var b=function(a,c,d,e,f){var g=e[a]||[];d[a]=!0;for(var h=0;h<g.length;h+=1){var i=g[h];d[i]||c[i]||b(i,c,d,e,f)}d[a]=!1,c[a]=!0,f.push(a)};d.chain=function(){for(var a=Array.prototype.slice.call(arguments),b=[],c=0;c<a.length;c+=1){var d=a[c];d._chained?b.push.apply(b,d._chained):b.push(d)}var e=function(){for(var a,c=0;c<b.length;c+=1){var d=b[c].apply(a,arguments);"undefined"!=typeof d&&(a=d)}return a};return e._chained=b,e},d.chainPathBefore=function(a,b,c){return d.set(a,b,d.chain(c,d.get(a,b)))},d.chainPathAfter=function(a,b,c){return d.set(a,b,d.chain(d.get(a,b),c))}}()},{}],15:[function(a,b,c){var d={};b.exports=d;var e=a("../body/World"),f=a("./Sleeping"),g=a("../collision/Resolver"),h=a("../render/Render"),i=a("../collision/Pairs"),k=(a("./Metrics"),a("../collision/Grid")),l=a("./Events"),m=a("../body/Composite"),n=a("../constraint/Constraint"),o=a("./Common"),p=a("../body/Body");!function(){d.create=function(a,b){b=o.isElement(a)?b:a,a=o.isElement(a)?a:null,b=b||{},(a||b.render)&&o.warn("Engine.create: engine.render is deprecated (see docs)");var c={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],timing:{timestamp:0,timeScale:1},broadphase:{controller:k}},d=o.extend(c,b);if(a||d.render){var f={element:a,controller:h};d.render=o.extend(f,d.render)}return d.render&&d.render.controller&&(d.render=d.render.controller.create(d.render)),d.render&&(d.render.engine=d),d.world=b.world||e.create(d.world),d.pairs=i.create(),d.broadphase=d.broadphase.controller.create(d.broadphase),d.metrics=d.metrics||{extended:!1},d},d.update=function(d,e,h){e=e||1e3/60,h=h||1;var q,j=d.world,k=d.timing,o=d.broadphase,p=[];k.timestamp+=e*k.timeScale;var r={timestamp:k.timestamp};l.trigger(d,"beforeUpdate",r);var s=m.allBodies(j),t=m.allConstraints(j);for(d.enableSleeping&&f.update(s,k.timeScale),b(s,j.gravity),c(s,e,k.timeScale,h,j.bounds),q=0;q<d.constraintIterations;q++)n.solveAll(t,k.timeScale);n.postSolveAll(s),o.controller?(j.isModified&&o.controller.clear(o),o.controller.update(o,s,d,j.isModified),p=o.pairsList):p=s,j.isModified&&m.setModified(j,!1,!1,!0);var u=o.detector(p,d),v=d.pairs,w=k.timestamp;for(i.update(v,u,w),i.removeOld(v,w),d.enableSleeping&&f.afterCollisions(v.list,k.timeScale),v.collisionStart.length>0&&l.trigger(d,"collisionStart",{pairs:v.collisionStart}),g.preSolvePosition(v.list),q=0;q<d.positionIterations;q++)g.solvePosition(v.list,k.timeScale);for(g.postSolvePosition(s),g.preSolveVelocity(v.list),q=0;q<d.velocityIterations;q++)g.solveVelocity(v.list,k.timeScale);return v.collisionActive.length>0&&l.trigger(d,"collisionActive",{pairs:v.collisionActive}),v.collisionEnd.length>0&&l.trigger(d,"collisionEnd",{pairs:v.collisionEnd}),a(s),l.trigger(d,"afterUpdate",r),d},d.merge=function(a,b){if(o.extend(a,b),b.world){a.world=b.world,d.clear(a);for(var c=m.allBodies(a.world),e=0;e<c.length;e++){var g=c[e];f.set(g,!1),g.id=o.nextId()}}},d.clear=function(a){var b=a.world;i.clear(a.pairs);var c=a.broadphase;if(c.controller){var d=m.allBodies(b);c.controller.clear(c),c.controller.update(c,d,a,!0)}};var a=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.force.x=0,c.force.y=0,c.torque=0}},b=function(a,b){var c="undefined"!=typeof b.scale?b.scale:.001;if((0!==b.x||0!==b.y)&&0!==c)for(var d=0;d<a.length;d++){var e=a[d];e.isStatic||e.isSleeping||(e.force.y+=e.mass*b.y*c,e.force.x+=e.mass*b.x*c)}},c=function(a,b,c,d,e){for(var f=0;f<a.length;f++){var g=a[f];g.isStatic||g.isSleeping||p.update(g,b,c,d)}}}()},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(a,b,c){var d={};b.exports=d;var e=a("./Common");!function(){d.on=function(a,b,c){for(var e,d=b.split(" "),f=0;f<d.length;f++)e=d[f],a.events=a.events||{},a.events[e]=a.events[e]||[],a.events[e].push(c);return c},d.off=function(a,b,c){if(!b)return void(a.events={});"function"==typeof b&&(c=b,b=e.keys(a.events).join(" "));for(var d=b.split(" "),f=0;f<d.length;f++){var g=a.events[d[f]],h=[];if(c&&g)for(var i=0;i<g.length;i++)g[i]!==c&&h.push(g[i]);a.events[d[f]]=h}},d.trigger=function(a,b,c){var d,f,g,h;if(a.events){c||(c={}),d=b.split(" ");for(var i=0;i<d.length;i++)if(f=d[i],g=a.events[f]){h=e.clone(c,!1),h.name=f,h.source=a;for(var j=0;j<g.length;j++)g[j].apply(a,[h])}}}}()},{"./Common":14}],17:[function(a,b,c){var d={};b.exports=d;var e=a("./Plugin"),f=a("./Common");!function(){d.name="matter-js",d.version="0.11.1",d.uses=[],d.used=[],d.use=function(){e.use(d,Array.prototype.slice.call(arguments))},d.before=function(a,b){return a=a.replace(/^Matter./,""),f.chainPathBefore(d,a,b)},d.after=function(a,b){return a=a.replace(/^Matter./,""),f.chainPathAfter(d,a,b)}}()},{"./Common":14,"./Plugin":20}],18:[function(a,b,c){},{"../body/Composite":2,"./Common":14}],19:[function(a,b,c){var d={};b.exports=d;var e=a("../core/Common");!function(){d.create=function(b){var c={};return b||e.log("Mouse.create: element was undefined, defaulting to document.body","warn"),c.element=b||document.body,c.absolute={x:0,y:0},c.position={x:0,y:0},c.mousedownPosition={x:0,y:0},c.mouseupPosition={x:0,y:0},c.offset={x:0,y:0},c.scale={x:1,y:1},c.wheelDelta=0,c.button=-1,c.pixelRatio=c.element.getAttribute("data-pixel-ratio")||1,c.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},c.mousemove=function(b){var d=a(b,c.element,c.pixelRatio),e=b.changedTouches;e&&(c.button=0,b.preventDefault()),c.absolute.x=d.x,c.absolute.y=d.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.sourceEvents.mousemove=b},c.mousedown=function(b){var d=a(b,c.element,c.pixelRatio),e=b.changedTouches;e?(c.button=0,b.preventDefault()):c.button=b.button,c.absolute.x=d.x,c.absolute.y=d.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.mousedownPosition.x=c.position.x,c.mousedownPosition.y=c.position.y,c.sourceEvents.mousedown=b},c.mouseup=function(b){var d=a(b,c.element,c.pixelRatio),e=b.changedTouches;e&&b.preventDefault(),c.button=-1,c.absolute.x=d.x,c.absolute.y=d.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.mouseupPosition.x=c.position.x,c.mouseupPosition.y=c.position.y,c.sourceEvents.mouseup=b},c.mousewheel=function(a){c.wheelDelta=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail)),a.preventDefault()},d.setElement(c,c.element),c},d.setElement=function(a,b){a.element=b,b.addEventListener("mousemove",a.mousemove),b.addEventListener("mousedown",a.mousedown),b.addEventListener("mouseup",a.mouseup),b.addEventListener("mousewheel",a.mousewheel),b.addEventListener("DOMMouseScroll",a.mousewheel),b.addEventListener("touchmove",a.mousemove),b.addEventListener("touchstart",a.mousedown),b.addEventListener("touchend",a.mouseup)},d.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},d.setOffset=function(a,b){a.offset.x=b.x,a.offset.y=b.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},d.setScale=function(a,b){a.scale.x=b.x,a.scale.y=b.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y};var a=function(a,b,c){var i,j,d=b.getBoundingClientRect(),e=document.documentElement||document.body.parentNode||document.body,f=void 0!==window.pageXOffset?window.pageXOffset:e.scrollLeft,g=void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop,h=a.changedTouches;return h?(i=h[0].pageX-d.left-f,j=h[0].pageY-d.top-g):(i=a.pageX-d.left-f,j=a.pageY-d.top-g),{x:i/(b.clientWidth/(b.width||b.clientWidth)*c),y:j/(b.clientHeight/(b.height||b.clientHeight)*c)}}}()},{"../core/Common":14}],20:[function(a,b,c){var d={};b.exports=d;var e=a("./Common");!function(){d._registry={},d.register=function(a){if(d.isPlugin(a)||e.warn("Plugin.register:",d.toString(a),"does not implement all required fields."),a.name in d._registry){var b=d._registry[a.name],c=d.versionParse(a.version).number,f=d.versionParse(b.version).number;c>f?(e.warn("Plugin.register:",d.toString(b),"was upgraded to",d.toString(a)),d._registry[a.name]=a):c<f?e.warn("Plugin.register:",d.toString(b),"can not be downgraded to",d.toString(a)):a!==b&&e.warn("Plugin.register:",d.toString(a),"is already registered to different plugin object")}else d._registry[a.name]=a;return a},d.resolve=function(a){return d._registry[d.dependencyParse(a).name]},d.toString=function(a){return"string"==typeof a?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},d.isPlugin=function(a){return a&&a.name&&a.version&&a.install},d.isUsed=function(a,b){return a.used.indexOf(b)>-1},d.isFor=function(a,b){var c=a.for&&d.dependencyParse(a.for);return!a.for||b.name===c.name&&d.versionSatisfies(b.version,c.range)},d.use=function(a,b){if(a.uses=(a.uses||[]).concat(b||[]),0===a.uses.length)return void e.warn("Plugin.use:",d.toString(a),"does not specify any dependencies to install.");for(var c=d.dependencies(a),f=e.topologicalSort(c),g=[],h=0;h<f.length;h+=1)if(f[h]!==a.name){var i=d.resolve(f[h]);i?d.isUsed(a,i.name)||(d.isFor(i,a)||(e.warn("Plugin.use:",d.toString(i),"is for",i.for,"but installed on",d.toString(a)+"."),i._warned=!0),i.install?i.install(a):(e.warn("Plugin.use:",d.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(g.push("🔶 "+d.toString(i)),delete i._warned):g.push("✅ "+d.toString(i)),a.used.push(i.name)):g.push("❌ "+f[h])}g.length>0&&e.info(g.join("  "))},d.dependencies=function(a,b){var c=d.dependencyParse(a),f=c.name;if(b=b||{},!(f in b)){a=d.resolve(a)||a,b[f]=e.map(a.uses||[],function(b){d.isPlugin(b)&&d.register(b);var f=d.dependencyParse(b),g=d.resolve(b);return g&&!d.versionSatisfies(g.version,f.range)?(e.warn("Plugin.dependencies:",d.toString(g),"does not satisfy",d.toString(f),"used by",d.toString(c)+"."),g._warned=!0,a._warned=!0):g||(e.warn("Plugin.dependencies:",d.toString(b),"used by",d.toString(c),"could not be resolved."),a._warned=!0),f.name});for(var g=0;g<b[f].length;g+=1)d.dependencies(b[f][g],b);return b}},d.dependencyParse=function(a){if(e.isString(a)){var b=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return b.test(a)||e.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},d.versionParse=function(a){var b=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;b.test(a)||e.warn("Plugin.versionParse:",a,"is not a valid version or range.");var c=a.split("-");a=c[0];var d=isNaN(Number(a[0])),f=d?a.substr(1):a,g=e.map(f.split("."),function(a){return Number(a)});return{isRange:d,version:f,range:a,operator:d?a[0]:"",parts:g,prerelease:c[1],number:1e8*g[0]+1e4*g[1]+g[2]}},d.versionSatisfies=function(a,b){b=b||"*";var c=d.versionParse(b),e=c.parts,f=d.versionParse(a),g=f.parts;if(c.isRange){if("*"===c.operator||"*"===a)return!0;if("~"===c.operator)return g[0]===e[0]&&g[1]===e[1]&&g[2]>=e[2];if("^"===c.operator)return e[0]>0?g[0]===e[0]&&f.number>=c.number:e[1]>0?g[1]===e[1]&&g[2]>=e[2]:g[2]===e[2]}return a===b||"*"===a}}()},{"./Common":14}],21:[function(a,b,c){var d={};b.exports=d;var e=a("./Events"),f=a("./Engine"),g=a("./Common");!function(){var a,b;if("undefined"!=typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,b=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!a){var c;a=function(a){c=setTimeout(function(){a(g.now())},1e3/60)},b=function(){clearTimeout(c)}}d.create=function(a){var b={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},c=g.extend(b,a);return c.delta=c.delta||1e3/c.fps,c.deltaMin=c.deltaMin||1e3/c.fps,c.deltaMax=c.deltaMax||1e3/(.5*c.fps),c.fps=1e3/c.delta,c},d.run=function(b,c){return"undefined"!=typeof b.positionIterations&&(c=b,b=d.create()),function e(f){b.frameRequestId=a(e),f&&b.enabled&&d.tick(b,c,f)}(),b},d.tick=function(a,b,c){var h,d=b.timing,g=1,i={timestamp:d.timestamp};e.trigger(a,"beforeTick",i),e.trigger(b,"beforeTick",i),a.isFixed?h=a.delta:(h=c-a.timePrev||a.delta,a.timePrev=c,a.deltaHistory.push(h),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),h=Math.min.apply(null,a.deltaHistory),h=h<a.deltaMin?a.deltaMin:h,h=h>a.deltaMax?a.deltaMax:h,g=h/a.delta,a.delta=h),0!==a.timeScalePrev&&(g*=d.timeScale/a.timeScalePrev),0===d.timeScale&&(g=0),a.timeScalePrev=d.timeScale,a.correction=g,a.frameCounter+=1,c-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((c-a.counterTimestamp)/1e3),a.counterTimestamp=c,a.frameCounter=0),e.trigger(a,"tick",i),e.trigger(b,"tick",i),b.world.isModified&&b.render&&b.render.controller&&b.render.controller.clear&&b.render.controller.clear(b.render),e.trigger(a,"beforeUpdate",i),f.update(b,h,g),e.trigger(a,"afterUpdate",i),b.render&&b.render.controller&&(e.trigger(a,"beforeRender",i),e.trigger(b,"beforeRender",i),b.render.controller.world(b.render),e.trigger(a,"afterRender",i),e.trigger(b,"afterRender",i)),e.trigger(a,"afterTick",i),e.trigger(b,"afterTick",i)},d.stop=function(a){b(a.frameRequestId)},d.start=function(a,b){d.run(a,b)}}()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(a,b,c){var d={};b.exports=d;var e=a("./Events");!function(){d._motionWakeThreshold=.18,d._motionSleepThreshold=.08,d._minBias=.9,d.update=function(a,b){for(var c=b*b*b,e=0;e<a.length;e++){var f=a[e],g=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(0===f.force.x&&0===f.force.y){var h=Math.min(f.motion,g),i=Math.max(f.motion,g);f.motion=d._minBias*h+(1-d._minBias)*i,f.sleepThreshold>0&&f.motion<d._motionSleepThreshold*c?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&d.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}else d.set(f,!1)}},d.afterCollisions=function(a,b){for(var c=b*b*b,e=0;e<a.length;e++){var f=a[e];if(f.isActive){var g=f.collision,h=g.bodyA.parent,i=g.bodyB.parent;if(!(h.isSleeping&&i.isSleeping||h.isStatic||i.isStatic)&&(h.isSleeping||i.isSleeping)){var j=h.isSleeping&&!h.isStatic?h:i,k=j===h?i:h;!j.isStatic&&k.motion>d._motionWakeThreshold*c&&d.set(j,!1)}}}},d.set=function(a,b){var c=a.isSleeping;b?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,c||e.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,c&&e.trigger(a,"sleepEnd"))}}()},{"./Events":16}],23:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vertices"),f=a("../core/Common"),g=a("../body/Body"),h=a("../geometry/Bounds"),i=a("../geometry/Vector");!function(){d.rectangle=function(a,b,c,d,h){h=h||{};var i={label:"Rectangle Body",position:{x:a,y:b},vertices:e.fromPath("L 0 0 L "+c+" 0 L "+c+" "+d+" L 0 "+d)};if(h.chamfer){var j=h.chamfer;i.vertices=e.chamfer(i.vertices,j.radius,j.quality,j.qualityMin,j.qualityMax),delete h.chamfer}return g.create(f.extend({},i,h))},d.trapezoid=function(a,b,c,d,h,i){i=i||{},h*=.5;var n,j=(1-2*h)*c,k=c*h,l=k+j,m=l+k;n=h<.5?"L 0 0 L "+k+" "+-d+" L "+l+" "+-d+" L "+m+" 0":"L 0 0 L "+l+" "+-d+" L "+m+" 0";var o={label:"Trapezoid Body",position:{x:a,y:b},vertices:e.fromPath(n)};if(i.chamfer){var p=i.chamfer;o.vertices=e.chamfer(o.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete i.chamfer}return g.create(f.extend({},o,i))},d.circle=function(a,b,c,e,g){e=e||{};var h={label:"Circle Body",circleRadius:c};g=g||25;var i=Math.ceil(Math.max(10,Math.min(g,c)));return i%2===1&&(i+=1),d.polygon(a,b,i,c,f.extend({},h,e))},d.polygon=function(a,b,c,h,i){if(i=i||{},c<3)return d.circle(a,b,h,i);for(var j=2*Math.PI/c,k="",l=.5*j,m=0;m<c;m+=1){var n=l+m*j,o=Math.cos(n)*h,p=Math.sin(n)*h;k+="L "+o.toFixed(3)+" "+p.toFixed(3)+" "}var q={label:"Polygon Body",position:{x:a,y:b},vertices:e.fromPath(k)};if(i.chamfer){var r=i.chamfer;q.vertices=e.chamfer(q.vertices,r.radius,r.quality,r.qualityMin,r.qualityMax),delete i.chamfer}return g.create(f.extend({},q,i))},d.fromVertices=function(a,b,c,d,j,k,l){var m,n,o,p,q,r,s,t,u;for(d=d||{},n=[],j="undefined"!=typeof j&&j,k="undefined"!=typeof k?k:.01,l="undefined"!=typeof l?l:10,window.decomp||f.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),f.isArray(c[0])||(c=[c]),t=0;t<c.length;t+=1)if(p=c[t],o=e.isConvex(p),o||!window.decomp)p=o?e.clockwiseSort(p):e.hull(p),n.push({position:{x:a,y:b},vertices:p});else{var v=new decomp.Polygon;for(q=0;q<p.length;q++)v.vertices.push([p[q].x,p[q].y]);v.makeCCW(),k!==!1&&v.removeCollinearPoints(k);var w=v.quickDecomp();for(q=0;q<w.length;q++){var x=w[q],y=[];for(r=0;r<x.vertices.length;r++)y.push({x:x.vertices[r][0],y:x.vertices[r][1]});l>0&&e.area(y)<l||n.push({position:e.centre(y),vertices:y})}}for(q=0;q<n.length;q++)n[q]=g.create(f.extend(n[q],d));if(j){var z=5;for(q=0;q<n.length;q++){var A=n[q];for(r=q+1;r<n.length;r++){var B=n[r];if(h.overlaps(A.bounds,B.bounds)){var C=A.vertices,D=B.vertices;for(s=0;s<A.vertices.length;s++)for(u=0;u<B.vertices.length;u++){var E=i.magnitudeSquared(i.sub(C[(s+1)%C.length],D[u])),F=i.magnitudeSquared(i.sub(C[s],D[(u+1)%D.length]));E<z&&F<z&&(C[s].isInternal=!0,D[u].isInternal=!0)}}}}}return n.length>1?(m=g.create(f.extend({parts:n.slice(0)},d)),g.setPosition(m,{x:a,y:b}),m):n[0]}}()},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(a,b,c){var d={};b.exports=d;var e=a("../body/Composite"),f=a("../constraint/Constraint"),g=a("../core/Common"),h=a("../body/Body"),i=a("./Bodies");!function(){d.stack=function(a,b,c,d,f,g,i){for(var m,j=e.create({label:"Stack"}),k=a,l=b,n=0,o=0;o<d;o++){for(var p=0,q=0;q<c;q++){var r=i(k,l,q,o,m,n);if(r){var s=r.bounds.max.y-r.bounds.min.y,t=r.bounds.max.x-r.bounds.min.x;s>p&&(p=s),h.translate(r,{x:.5*t,y:.5*s}),k=r.bounds.max.x+f,e.addBody(j,r),m=r,n+=1}else k+=f}l+=p+g,k=a}return j},d.chain=function(a,b,c,d,h,i){for(var j=a.bodies,k=1;k<j.length;k++){var l=j[k-1],m=j[k],n=l.bounds.max.y-l.bounds.min.y,o=l.bounds.max.x-l.bounds.min.x,p=m.bounds.max.y-m.bounds.min.y,q=m.bounds.max.x-m.bounds.min.x,r={bodyA:l,pointA:{x:o*b,y:n*c},bodyB:m,pointB:{x:q*d,y:p*h}},s=g.extend(r,i);e.addConstraint(a,f.create(s))}return a.label+=" Chain",a},d.mesh=function(a,b,c,d,h){var j,k,l,m,n,i=a.bodies;for(j=0;j<c;j++){for(k=1;k<b;k++)l=i[k-1+j*b],m=i[k+j*b],e.addConstraint(a,f.create(g.extend({bodyA:l,bodyB:m},h)));if(j>0)for(k=0;k<b;k++)l=i[k+(j-1)*b],m=i[k+j*b],e.addConstraint(a,f.create(g.extend({bodyA:l,bodyB:m},h))),d&&k>0&&(n=i[k-1+(j-1)*b],e.addConstraint(a,f.create(g.extend({bodyA:n,bodyB:m},h)))),d&&k<b-1&&(n=i[k+1+(j-1)*b],e.addConstraint(a,f.create(g.extend({bodyA:n,bodyB:m},h))))}return a.label+=" Mesh",a},d.pyramid=function(a,b,c,e,f,g,i){return d.stack(a,b,c,e,f,g,function(b,d,g,j,k,l){var m=Math.min(e,Math.ceil(c/2)),n=k?k.bounds.max.x-k.bounds.min.x:0;if(!(j>m)){j=m-j;var o=j,p=c-1-j;if(!(g<o||g>p)){1===l&&h.translate(k,{x:(g+(c%2===1?1:-1))*n,y:0});var q=k?g*n:0;return i(a+q+g*f,d,g,j,k,l)}}})},d.newtonsCradle=function(a,b,c,d,g){for(var h=e.create({label:"Newtons Cradle"}),j=0;j<c;j++){var k=1.9,l=i.circle(a+j*(d*k),b+g,d,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=f.create({pointA:{x:a+j*(d*k),y:b},bodyB:l});e.addBody(h,l),e.addConstraint(h,m)}return h},d.car=function(a,b,c,d,g){var j=h.nextGroup(!0),k=-20,l=.5*-c+k,m=.5*c-k,n=0,o=e.create({label:"Car"}),p=i.trapezoid(a,b,c,d,.3,{collisionFilter:{group:j},friction:.01,chamfer:{radius:10}}),q=i.circle(a+l,b+n,g,{collisionFilter:{group:j},friction:.8,density:.01}),r=i.circle(a+m,b+n,g,{collisionFilter:{group:j},friction:.8,density:.01}),s=f.create({bodyA:p,pointA:{x:l,y:n},bodyB:q,stiffness:.2}),t=f.create({bodyA:p,pointA:{x:m,y:n},bodyB:r,stiffness:.2});return e.addBody(o,p),e.addBody(o,q),e.addBody(o,r),e.addConstraint(o,s),e.addConstraint(o,t),o},d.softBody=function(a,b,c,e,f,h,j,k,l,m){l=g.extend({inertia:1/0},l),m=g.extend({stiffness:.4},m);var n=d.stack(a,b,c,e,f,h,function(a,b){return i.circle(a,b,k,l)});return d.mesh(n,c,e,j,m),n.label="Soft Body",n}}()},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vector"),f=a("../core/Common");!function(){d.fromVertices=function(a){for(var b={},c=0;c<a.length;c++){var d=(c+1)%a.length,g=e.normalise({x:a[d].y-a[c].y,y:a[c].x-a[d].x}),h=0===g.y?1/0:g.x/g.y;h=h.toFixed(3).toString(),b[h]=g}return f.values(b)},d.rotate=function(a,b){if(0!==b)for(var c=Math.cos(b),d=Math.sin(b),e=0;e<a.length;e++){var g,f=a[e];g=f.x*c-f.y*d,f.y=f.x*d+f.y*c,f.x=g}}}()},{"../core/Common":14,"../geometry/Vector":28}],26:[function(a,b,c){var d={};b.exports=d,function(){d.create=function(a){var b={min:{x:0,y:0},max:{x:0,y:0}};return a&&d.update(b,a),b},d.update=function(a,b,c){a.min.x=1/0,a.max.x=-(1/0),a.min.y=1/0,a.max.y=-(1/0);for(var d=0;d<b.length;d++){var e=b[d];e.x>a.max.x&&(a.max.x=e.x),e.x<a.min.x&&(a.min.x=e.x),e.y>a.max.y&&(a.max.y=e.y),e.y<a.min.y&&(a.min.y=e.y)}c&&(c.x>0?a.max.x+=c.x:a.min.x+=c.x,c.y>0?a.max.y+=c.y:a.min.y+=c.y)},d.contains=function(a,b){return b.x>=a.min.x&&b.x<=a.max.x&&b.y>=a.min.y&&b.y<=a.max.y},d.overlaps=function(a,b){return a.min.x<=b.max.x&&a.max.x>=b.min.x&&a.max.y>=b.min.y&&a.min.y<=b.max.y},d.translate=function(a,b){a.min.x+=b.x,a.max.x+=b.x,a.min.y+=b.y,a.max.y+=b.y},d.shift=function(a,b){var c=a.max.x-a.min.x,d=a.max.y-a.min.y;a.min.x=b.x,a.max.x=b.x+c,a.min.y=b.y,a.max.y=b.y+d}}()},{}],27:[function(a,b,c){var d={};b.exports=d;a("../geometry/Bounds");!function(){d.pathToVertices=function(b,c){var d,e,f,g,h,i,j,k,l,m,o,p,n=[],q=0,r=0,s=0;c=c||15;var t=function(a,b,c){var d=c%2===1&&c>1;if(!l||a!=l.x||b!=l.y){l&&d?(o=l.x,p=l.y):(o=0,p=0);var e={x:o+a,y:p+b};!d&&l||(l=e),n.push(e),r=o+a,s=p+b}},u=function(a){var b=a.pathSegTypeAsLetter.toUpperCase();if("Z"!==b){switch(b){case"M":case"L":case"T":case"C":case"S":case"Q":r=a.x,s=a.y;break;case"H":r=a.x;break;case"V":s=a.y}t(r,s,a.pathSegType)}};for(a(b),f=b.getTotalLength(),i=[],d=0;d<b.pathSegList.numberOfItems;d+=1)i.push(b.pathSegList.getItem(d));for(j=i.concat();q<f;){if(m=b.getPathSegAtLength(q),h=i[m],h!=k){for(;j.length&&j[0]!=h;)u(j.shift());k=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":g=b.getPointAtLength(q),t(g.x,g.y,0)}q+=c}for(d=0,e=j.length;d<e;++d)u(j[d]);return n};var a=function(a){for(var b,c,d,e,f,g,h=a.pathSegList,i=0,j=0,k=h.numberOfItems,l=0;l<k;++l){var m=h.getItem(l),n=m.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(n))"x"in m&&(i=m.x),"y"in m&&(j=m.y);else switch("x1"in m&&(d=i+m.x1),"x2"in m&&(f=i+m.x2),"y1"in m&&(e=j+m.y1),"y2"in m&&(g=j+m.y2),"x"in m&&(i+=m.x),"y"in m&&(j+=m.y),n){case"m":h.replaceItem(a.createSVGPathSegMovetoAbs(i,j),l);break;case"l":h.replaceItem(a.createSVGPathSegLinetoAbs(i,j),l);break;case"h":h.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(i),l);break;case"v":h.replaceItem(a.createSVGPathSegLinetoVerticalAbs(j),l);break;case"c":h.replaceItem(a.createSVGPathSegCurvetoCubicAbs(i,j,d,e,f,g),l);break;case"s":h.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(i,j,f,g),l);break;case"q":h.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(i,j,d,e),l);break;case"t":h.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(i,j),l);break;case"a":h.replaceItem(a.createSVGPathSegArcAbs(i,j,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),l);break;case"z":case"Z":i=b,j=c}"M"!=n&&"m"!=n||(b=i,c=j)}}}()},{"../geometry/Bounds":26}],28:[function(a,b,c){var d={};b.exports=d,function(){d.create=function(a,b){return{x:a||0,y:b||0}},d.clone=function(a){return{x:a.x,y:a.y}},d.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},d.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y},d.rotate=function(a,b){var c=Math.cos(b),d=Math.sin(b);return{x:a.x*c-a.y*d,y:a.x*d+a.y*c}},d.rotateAbout=function(a,b,c,d){var e=Math.cos(b),f=Math.sin(b);d||(d={});var g=c.x+((a.x-c.x)*e-(a.y-c.y)*f);return d.y=c.y+((a.x-c.x)*f+(a.y-c.y)*e),d.x=g,d},d.normalise=function(a){var b=d.magnitude(a);return 0===b?{x:0,y:0}:{x:a.x/b,y:a.y/b}},d.dot=function(a,b){return a.x*b.x+a.y*b.y},d.cross=function(a,b){return a.x*b.y-a.y*b.x},d.cross3=function(a,b,c){return(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x)},d.add=function(a,b,c){return c||(c={}),c.x=a.x+b.x,c.y=a.y+b.y,c},d.sub=function(a,b,c){return c||(c={}),c.x=a.x-b.x,c.y=a.y-b.y,c},d.mult=function(a,b){return{x:a.x*b,y:a.y*b}},d.div=function(a,b){return{x:a.x/b,y:a.y/b}},d.perp=function(a,b){return b=b===!0?-1:1,{x:b*-a.y,y:b*a.x}},d.neg=function(a){return{x:-a.x,y:-a.y}},d.angle=function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)},d._temp=[d.create(),d.create(),d.create(),d.create(),d.create(),d.create()]}()},{}],29:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Vector"),f=a("../core/Common");!function(){d.create=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f={x:e.x,y:e.y,index:d,body:b,isInternal:!1};c.push(f)}return c},d.fromPath=function(a,b){var c=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,e=[];return a.replace(c,function(a,b,c){e.push({x:parseFloat(b),y:parseFloat(c)})}),d.create(e,b)},d.centre=function(a){for(var f,g,h,b=d.area(a,!0),c={x:0,y:0},i=0;i<a.length;i++)h=(i+1)%a.length,f=e.cross(a[i],a[h]),g=e.mult(e.add(a[i],a[h]),f),c=e.add(c,g);return e.div(c,6*b)},d.mean=function(a){for(var b={x:0,y:0},c=0;c<a.length;c++)b.x+=a[c].x,b.y+=a[c].y;return e.div(b,a.length)},d.area=function(a,b){for(var c=0,d=a.length-1,e=0;e<a.length;e++)c+=(a[d].x-a[e].x)*(a[d].y+a[e].y),d=e;return b?c/2:Math.abs(c)/2},d.inertia=function(a,b){for(var g,h,c=0,d=0,f=a,i=0;i<f.length;i++)h=(i+1)%f.length,g=Math.abs(e.cross(f[h],f[i])),c+=g*(e.dot(f[h],f[h])+e.dot(f[h],f[i])+e.dot(f[i],f[i])),d+=g;return b/6*(c/d)},d.translate=function(a,b,c){var d;if(c)for(d=0;d<a.length;d++)a[d].x+=b.x*c,a[d].y+=b.y*c;else for(d=0;d<a.length;d++)a[d].x+=b.x,a[d].y+=b.y;return a},d.rotate=function(a,b,c){if(0!==b){for(var d=Math.cos(b),e=Math.sin(b),f=0;f<a.length;f++){var g=a[f],h=g.x-c.x,i=g.y-c.y;g.x=c.x+(h*d-i*e),g.y=c.y+(h*e+i*d)}return a}},d.contains=function(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=a[(c+1)%a.length];if((b.x-d.x)*(e.y-d.y)+(b.y-d.y)*(d.x-e.x)>0)return!1}return!0},d.scale=function(a,b,c,f){if(1===b&&1===c)return a;f=f||d.centre(a);for(var g,h,i=0;i<a.length;i++)g=a[i],h=e.sub(g,f),a[i].x=f.x+h.x*b,a[i].y=f.y+h.y*c;return a},d.chamfer=function(a,b,c,d,g){b=b||[8],b.length||(b=[b]),c="undefined"!=typeof c?c:-1,d=d||2,g=g||14;for(var h=[],i=0;i<a.length;i++){var j=a[i-1>=0?i-1:a.length-1],k=a[i],l=a[(i+1)%a.length],m=b[i<b.length?i:b.length-1];if(0!==m){var n=e.normalise({x:k.y-j.y,y:j.x-k.x}),o=e.normalise({x:l.y-k.y,y:k.x-l.x}),p=Math.sqrt(2*Math.pow(m,2)),q=e.mult(f.clone(n),m),r=e.normalise(e.mult(e.add(n,o),.5)),s=e.sub(k,e.mult(r,p)),t=c;c===-1&&(t=1.75*Math.pow(m,.32)),t=f.clamp(t,d,g),t%2===1&&(t+=1);for(var u=Math.acos(e.dot(n,o)),v=u/t,w=0;w<t;w++)h.push(e.add(e.rotate(q,v*w),s))}else h.push(k)}return h},d.clockwiseSort=function(a){var b=d.mean(a);return a.sort(function(a,c){return e.angle(b,a)-e.angle(b,c)}),a},d.isConvex=function(a){var d,e,f,g,b=0,c=a.length;if(c<3)return null;for(d=0;d<c;d++)if(e=(d+1)%c,f=(d+2)%c,g=(a[e].x-a[d].x)*(a[f].y-a[e].y),g-=(a[e].y-a[d].y)*(a[f].x-a[e].x),g<0?b|=1:g>0&&(b|=2),3===b)return!1;return 0!==b||null},d.hull=function(a){var d,f,b=[],c=[];for(a=a.slice(0),a.sort(function(a,b){var c=a.x-b.x;return 0!==c?c:a.y-b.y}),f=0;f<a.length;f++){for(d=a[f];c.length>=2&&e.cross3(c[c.length-2],c[c.length-1],d)<=0;)c.pop();c.push(d)}for(f=a.length-1;f>=0;f--){for(d=a[f];b.length>=2&&e.cross3(b[b.length-2],b[b.length-1],d)<=0;)b.pop();b.push(d)}return b.pop(),c.pop(),b.concat(c)}}()},{"../core/Common":14,"../geometry/Vector":28}],30:[function(a,b,c){var d=b.exports=a("../core/Matter");d.Body=a("../body/Body"),d.Composite=a("../body/Composite"),d.World=a("../body/World"),d.Contact=a("../collision/Contact"),d.Detector=a("../collision/Detector"),d.Grid=a("../collision/Grid"),d.Pairs=a("../collision/Pairs"),d.Pair=a("../collision/Pair"),d.Query=a("../collision/Query"),d.Resolver=a("../collision/Resolver"),d.SAT=a("../collision/SAT"),d.Constraint=a("../constraint/Constraint"),d.MouseConstraint=a("../constraint/MouseConstraint"),d.Common=a("../core/Common"),d.Engine=a("../core/Engine"),d.Events=a("../core/Events"),d.Mouse=a("../core/Mouse"),d.Runner=a("../core/Runner"),d.Sleeping=a("../core/Sleeping"),d.Plugin=a("../core/Plugin"),d.Bodies=a("../factory/Bodies"),d.Composites=a("../factory/Composites"),d.Axes=a("../geometry/Axes"),d.Bounds=a("../geometry/Bounds"),d.Svg=a("../geometry/Svg"),d.Vector=a("../geometry/Vector"),d.Vertices=a("../geometry/Vertices"),d.Render=a("../render/Render"),d.RenderPixi=a("../render/RenderPixi"),d.World.add=d.Composite.add,d.World.remove=d.Composite.remove,d.World.addComposite=d.Composite.addComposite,d.World.addBody=d.Composite.addBody,d.World.addConstraint=d.Composite.addConstraint,d.World.clear=d.Composite.clear,d.Engine.run=d.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(a,b,c){var d={};b.exports=d;var e=a("../core/Common"),f=a("../body/Composite"),g=a("../geometry/Bounds"),h=a("../core/Events"),i=a("../collision/Grid"),j=a("../geometry/Vector");!function(){var a,b;"undefined"!=typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){
window.setTimeout(function(){a(e.now())},1e3/60)},b=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),d.create=function(a){var b={controller:d,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#fafafa",wireframeBackground:"#222",hasBounds:!!a.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},f=e.extend(b,a);return f.canvas&&(f.canvas.width=f.options.width||f.canvas.width,f.canvas.height=f.options.height||f.canvas.height),f.mouse=a.mouse,f.engine=a.engine,f.canvas=f.canvas||c(f.options.width,f.options.height),f.context=f.canvas.getContext("2d"),f.textures={},f.bounds=f.bounds||{min:{x:0,y:0},max:{x:f.canvas.width,y:f.canvas.height}},1!==f.options.pixelRatio&&d.setPixelRatio(f,f.options.pixelRatio),e.isElement(f.element)?f.element.appendChild(f.canvas):e.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),f},d.run=function(b){!function c(e){b.frameRequestId=a(c),d.world(b)}()},d.stop=function(a){b(a.frameRequestId)},d.setPixelRatio=function(a,b){var c=a.options,d=a.canvas;"auto"===b&&(b=k(d)),c.pixelRatio=b,d.setAttribute("data-pixel-ratio",b),d.width=c.width*b,d.height=c.height*b,d.style.width=c.width+"px",d.style.height=c.height+"px",a.context.scale(b,b)},d.world=function(a){var s,b=a.engine,c=b.world,e=a.canvas,k=a.context,l=a.options,n=f.allBodies(c),o=f.allConstraints(c),p=l.wireframes?l.wireframeBackground:l.background,q=[],r=[],t={timestamp:b.timing.timestamp};if(h.trigger(a,"beforeRender",t),a.currentBackground!==p&&m(a,p),k.globalCompositeOperation="source-in",k.fillStyle="transparent",k.fillRect(0,0,e.width,e.height),k.globalCompositeOperation="source-over",l.hasBounds){var u=a.bounds.max.x-a.bounds.min.x,v=a.bounds.max.y-a.bounds.min.y,w=u/l.width,x=v/l.height;for(s=0;s<n.length;s++){var y=n[s];g.overlaps(y.bounds,a.bounds)&&q.push(y)}for(s=0;s<o.length;s++){var z=o[s],A=z.bodyA,B=z.bodyB,C=z.pointA,D=z.pointB;A&&(C=j.add(A.position,z.pointA)),B&&(D=j.add(B.position,z.pointB)),C&&D&&(g.contains(a.bounds,C)||g.contains(a.bounds,D))&&r.push(z)}k.scale(1/w,1/x),k.translate(-a.bounds.min.x,-a.bounds.min.y)}else r=o,q=n;!l.wireframes||b.enableSleeping&&l.showSleeping?d.bodies(a,q,k):(l.showConvexHulls&&d.bodyConvexHulls(a,q,k),d.bodyWireframes(a,q,k)),l.showBounds&&d.bodyBounds(a,q,k),(l.showAxes||l.showAngleIndicator)&&d.bodyAxes(a,q,k),l.showPositions&&d.bodyPositions(a,q,k),l.showVelocity&&d.bodyVelocity(a,q,k),l.showIds&&d.bodyIds(a,q,k),l.showSeparations&&d.separations(a,b.pairs.list,k),l.showCollisions&&d.collisions(a,b.pairs.list,k),l.showVertexNumbers&&d.vertexNumbers(a,q,k),l.showMousePosition&&d.mousePosition(a,a.mouse,k),d.constraints(r,k),l.showBroadphase&&b.broadphase.controller===i&&d.grid(a,b.broadphase,k),l.showDebug&&d.debug(a,k),l.hasBounds&&k.setTransform(l.pixelRatio,0,0,l.pixelRatio,0,0),h.trigger(a,"afterRender",t)},d.debug=function(a,b){var c=b,d=a.engine,e=d.world,g=d.metrics,h=a.options,j=(f.allBodies(e),"    ");if(d.timing.timestamp-(a.debugTimestamp||0)>=500){var k="";g.timing&&(k+="fps: "+Math.round(g.timing.fps)+j),a.debugString=k,a.debugTimestamp=d.timing.timestamp}if(a.debugString){c.font="12px Arial",h.wireframes?c.fillStyle="rgba(255,255,255,0.5)":c.fillStyle="rgba(0,0,0,0.5)";for(var l=a.debugString.split("\n"),m=0;m<l.length;m++)c.fillText(l[m],50,50+18*m)}},d.constraints=function(a,b){for(var c=b,d=0;d<a.length;d++){var e=a[d];if(e.render.visible&&e.pointA&&e.pointB){var f=e.bodyA,g=e.bodyB;f?(c.beginPath(),c.moveTo(f.position.x+e.pointA.x,f.position.y+e.pointA.y)):(c.beginPath(),c.moveTo(e.pointA.x,e.pointA.y)),g?c.lineTo(g.position.x+e.pointB.x,g.position.y+e.pointB.y):c.lineTo(e.pointB.x,e.pointB.y),c.lineWidth=e.render.lineWidth,c.strokeStyle=e.render.strokeStyle,c.stroke()}}},d.bodyShadows=function(a,b,c){for(var d=c,f=(a.engine,0);f<b.length;f++){var g=b[f];if(g.render.visible){if(g.circleRadius)d.beginPath(),d.arc(g.position.x,g.position.y,g.circleRadius,0,2*Math.PI),d.closePath();else{d.beginPath(),d.moveTo(g.vertices[0].x,g.vertices[0].y);for(var h=1;h<g.vertices.length;h++)d.lineTo(g.vertices[h].x,g.vertices[h].y);d.closePath()}var i=g.position.x-.5*a.options.width,j=g.position.y-.2*a.options.height,k=Math.abs(i)+Math.abs(j);d.shadowColor="rgba(0,0,0,0.15)",d.shadowOffsetX=.05*i,d.shadowOffsetY=.05*j,d.shadowBlur=1+12*Math.min(1,k/1e3),d.fill(),d.shadowColor=null,d.shadowOffsetX=null,d.shadowOffsetY=null,d.shadowBlur=null}}},d.bodies=function(a,b,c){var h,i,j,k,d=c,f=(a.engine,a.options),g=f.showInternalEdges||!f.wireframes;for(j=0;j<b.length;j++)if(h=b[j],h.render.visible)for(k=h.parts.length>1?1:0;k<h.parts.length;k++)if(i=h.parts[k],i.render.visible){if(f.showSleeping&&h.isSleeping?d.globalAlpha=.5*i.render.opacity:1!==i.render.opacity&&(d.globalAlpha=i.render.opacity),i.render.sprite&&i.render.sprite.texture&&!f.wireframes){var m=i.render.sprite,n=l(a,m.texture);d.translate(i.position.x,i.position.y),d.rotate(i.angle),d.drawImage(n,n.width*-m.xOffset*m.xScale,n.height*-m.yOffset*m.yScale,n.width*m.xScale,n.height*m.yScale),d.rotate(-i.angle),d.translate(-i.position.x,-i.position.y)}else{if(i.circleRadius)d.beginPath(),d.arc(i.position.x,i.position.y,i.circleRadius,0,2*Math.PI);else{d.beginPath(),d.moveTo(i.vertices[0].x,i.vertices[0].y);for(var o=1;o<i.vertices.length;o++)!i.vertices[o-1].isInternal||g?d.lineTo(i.vertices[o].x,i.vertices[o].y):d.moveTo(i.vertices[o].x,i.vertices[o].y),i.vertices[o].isInternal&&!g&&d.moveTo(i.vertices[(o+1)%i.vertices.length].x,i.vertices[(o+1)%i.vertices.length].y);d.lineTo(i.vertices[0].x,i.vertices[0].y),d.closePath()}f.wireframes?(d.lineWidth=1,d.strokeStyle="#bbb"):(d.fillStyle=i.render.fillStyle,d.lineWidth=i.render.lineWidth,d.strokeStyle=i.render.strokeStyle,d.fill()),d.stroke()}d.globalAlpha=1}},d.bodyWireframes=function(a,b,c){var f,g,h,i,j,d=c,e=a.options.showInternalEdges;for(d.beginPath(),h=0;h<b.length;h++)if(f=b[h],f.render.visible)for(j=f.parts.length>1?1:0;j<f.parts.length;j++){for(g=f.parts[j],d.moveTo(g.vertices[0].x,g.vertices[0].y),i=1;i<g.vertices.length;i++)!g.vertices[i-1].isInternal||e?d.lineTo(g.vertices[i].x,g.vertices[i].y):d.moveTo(g.vertices[i].x,g.vertices[i].y),g.vertices[i].isInternal&&!e&&d.moveTo(g.vertices[(i+1)%g.vertices.length].x,g.vertices[(i+1)%g.vertices.length].y);d.lineTo(g.vertices[0].x,g.vertices[0].y)}d.lineWidth=1,d.strokeStyle="#bbb",d.stroke()},d.bodyConvexHulls=function(a,b,c){var e,g,h,d=c;for(d.beginPath(),g=0;g<b.length;g++)if(e=b[g],e.render.visible&&1!==e.parts.length){for(d.moveTo(e.vertices[0].x,e.vertices[0].y),h=1;h<e.vertices.length;h++)d.lineTo(e.vertices[h].x,e.vertices[h].y);d.lineTo(e.vertices[0].x,e.vertices[0].y)}d.lineWidth=1,d.strokeStyle="rgba(255,255,255,0.2)",d.stroke()},d.vertexNumbers=function(a,b,c){var e,f,g,d=c;for(e=0;e<b.length;e++){var h=b[e].parts;for(g=h.length>1?1:0;g<h.length;g++){var i=h[g];for(f=0;f<i.vertices.length;f++)d.fillStyle="rgba(255,255,255,0.2)",d.fillText(e+"_"+f,i.position.x+.8*(i.vertices[f].x-i.position.x),i.position.y+.8*(i.vertices[f].y-i.position.y))}}},d.mousePosition=function(a,b,c){var d=c;d.fillStyle="rgba(255,255,255,0.8)",d.fillText(b.position.x+"  "+b.position.y,b.position.x+5,b.position.y-5)},d.bodyBounds=function(a,b,c){var d=c,f=(a.engine,a.options);d.beginPath();for(var g=0;g<b.length;g++){var h=b[g];if(h.render.visible)for(var i=b[g].parts,j=i.length>1?1:0;j<i.length;j++){var k=i[j];d.rect(k.bounds.min.x,k.bounds.min.y,k.bounds.max.x-k.bounds.min.x,k.bounds.max.y-k.bounds.min.y)}}f.wireframes?d.strokeStyle="rgba(255,255,255,0.08)":d.strokeStyle="rgba(0,0,0,0.1)",d.lineWidth=1,d.stroke()},d.bodyAxes=function(a,b,c){var g,h,i,j,d=c,f=(a.engine,a.options);for(d.beginPath(),h=0;h<b.length;h++){var k=b[h],l=k.parts;if(k.render.visible)if(f.showAxes)for(i=l.length>1?1:0;i<l.length;i++)for(g=l[i],j=0;j<g.axes.length;j++){var m=g.axes[j];d.moveTo(g.position.x,g.position.y),d.lineTo(g.position.x+20*m.x,g.position.y+20*m.y)}else for(i=l.length>1?1:0;i<l.length;i++)for(g=l[i],j=0;j<g.axes.length;j++)d.moveTo(g.position.x,g.position.y),d.lineTo((g.vertices[0].x+g.vertices[g.vertices.length-1].x)/2,(g.vertices[0].y+g.vertices[g.vertices.length-1].y)/2)}f.wireframes?d.strokeStyle="indianred":(d.strokeStyle="rgba(0,0,0,0.8)",d.globalCompositeOperation="overlay"),d.lineWidth=1,d.stroke(),d.globalCompositeOperation="source-over"},d.bodyPositions=function(a,b,c){var g,h,i,j,d=c,f=(a.engine,a.options);for(d.beginPath(),i=0;i<b.length;i++)if(g=b[i],g.render.visible)for(j=0;j<g.parts.length;j++)h=g.parts[j],d.arc(h.position.x,h.position.y,3,0,2*Math.PI,!1),d.closePath();for(f.wireframes?d.fillStyle="indianred":d.fillStyle="rgba(0,0,0,0.5)",d.fill(),d.beginPath(),i=0;i<b.length;i++)g=b[i],g.render.visible&&(d.arc(g.positionPrev.x,g.positionPrev.y,2,0,2*Math.PI,!1),d.closePath());d.fillStyle="rgba(255,165,0,0.8)",d.fill()},d.bodyVelocity=function(a,b,c){var d=c;d.beginPath();for(var e=0;e<b.length;e++){var f=b[e];f.render.visible&&(d.moveTo(f.position.x,f.position.y),d.lineTo(f.position.x+2*(f.position.x-f.positionPrev.x),f.position.y+2*(f.position.y-f.positionPrev.y)))}d.lineWidth=3,d.strokeStyle="cornflowerblue",d.stroke()},d.bodyIds=function(a,b,c){var e,f,d=c;for(e=0;e<b.length;e++)if(b[e].render.visible){var g=b[e].parts;for(f=g.length>1?1:0;f<g.length;f++){var h=g[f];d.font="12px Arial",d.fillStyle="rgba(255,255,255,0.5)",d.fillText(h.id,h.position.x+10,h.position.y-10)}}},d.collisions=function(a,b,c){var f,g,k,l,d=c,e=a.options;for(d.beginPath(),k=0;k<b.length;k++)if(f=b[k],f.isActive)for(g=f.collision,l=0;l<f.activeContacts.length;l++){var m=f.activeContacts[l],n=m.vertex;d.rect(n.x-1.5,n.y-1.5,3.5,3.5)}for(e.wireframes?d.fillStyle="rgba(255,255,255,0.7)":d.fillStyle="orange",d.fill(),d.beginPath(),k=0;k<b.length;k++)if(f=b[k],f.isActive&&(g=f.collision,f.activeContacts.length>0)){var o=f.activeContacts[0].vertex.x,p=f.activeContacts[0].vertex.y;2===f.activeContacts.length&&(o=(f.activeContacts[0].vertex.x+f.activeContacts[1].vertex.x)/2,p=(f.activeContacts[0].vertex.y+f.activeContacts[1].vertex.y)/2),g.bodyB===g.supports[0].body||g.bodyA.isStatic===!0?d.moveTo(o-8*g.normal.x,p-8*g.normal.y):d.moveTo(o+8*g.normal.x,p+8*g.normal.y),d.lineTo(o,p)}e.wireframes?d.strokeStyle="rgba(255,165,0,0.7)":d.strokeStyle="orange",d.lineWidth=1,d.stroke()},d.separations=function(a,b,c){var f,g,i,j,k,d=c,e=a.options;for(d.beginPath(),k=0;k<b.length;k++)if(f=b[k],f.isActive){g=f.collision,i=g.bodyA,j=g.bodyB;var m=1;j.isStatic||i.isStatic||(m=.5),j.isStatic&&(m=0),d.moveTo(j.position.x,j.position.y),d.lineTo(j.position.x-g.penetration.x*m,j.position.y-g.penetration.y*m),m=1,j.isStatic||i.isStatic||(m=.5),i.isStatic&&(m=0),d.moveTo(i.position.x,i.position.y),d.lineTo(i.position.x+g.penetration.x*m,i.position.y+g.penetration.y*m)}e.wireframes?d.strokeStyle="rgba(255,165,0,0.5)":d.strokeStyle="orange",d.stroke()},d.grid=function(a,b,c){var d=c,f=a.options;f.wireframes?d.strokeStyle="rgba(255,180,0,0.1)":d.strokeStyle="rgba(255,180,0,0.5)",d.beginPath();for(var g=e.keys(b.buckets),h=0;h<g.length;h++){var i=g[h];if(!(b.buckets[i].length<2)){var j=i.split(",");d.rect(.5+parseInt(j[0],10)*b.bucketWidth,.5+parseInt(j[1],10)*b.bucketHeight,b.bucketWidth,b.bucketHeight)}}d.lineWidth=1,d.stroke()},d.inspector=function(a,b){var g,d=(a.engine,a.selected),e=a.render,f=e.options;if(f.hasBounds){var h=e.bounds.max.x-e.bounds.min.x,i=e.bounds.max.y-e.bounds.min.y,j=h/e.options.width,k=i/e.options.height;b.scale(1/j,1/k),b.translate(-e.bounds.min.x,-e.bounds.min.y)}for(var l=0;l<d.length;l++){var m=d[l].data;switch(b.translate(.5,.5),b.lineWidth=1,b.strokeStyle="rgba(255,165,0,0.9)",b.setLineDash([1,2]),m.type){case"body":g=m.bounds,b.beginPath(),b.rect(Math.floor(g.min.x-3),Math.floor(g.min.y-3),Math.floor(g.max.x-g.min.x+6),Math.floor(g.max.y-g.min.y+6)),b.closePath(),b.stroke();break;case"constraint":var n=m.pointA;m.bodyA&&(n=m.pointB),b.beginPath(),b.arc(n.x,n.y,10,0,2*Math.PI),b.closePath(),b.stroke()}b.setLineDash([]),b.translate(-.5,-.5)}null!==a.selectStart&&(b.translate(.5,.5),b.lineWidth=1,b.strokeStyle="rgba(255,165,0,0.6)",b.fillStyle="rgba(255,165,0,0.1)",g=a.selectBounds,b.beginPath(),b.rect(Math.floor(g.min.x),Math.floor(g.min.y),Math.floor(g.max.x-g.min.x),Math.floor(g.max.y-g.min.y)),b.closePath(),b.stroke(),b.fill(),b.translate(-.5,-.5)),f.hasBounds&&b.setTransform(1,0,0,1,0,0)};var c=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c.oncontextmenu=function(){return!1},c.onselectstart=function(){return!1},c},k=function(a){var b=a.getContext("2d"),c=window.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return c/d},l=function(a,b){var c=a.textures[b];return c?c:(c=a.textures[b]=new Image,c.src=b,c)},m=function(a,b){var c=b;/(jpg|gif|png)$/.test(b)&&(c="url("+b+")"),a.canvas.style.background=c,a.canvas.style.backgroundSize="contain",a.currentBackground=b}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(a,b,c){var d={};b.exports=d;var e=a("../geometry/Bounds"),f=a("../body/Composite"),g=a("../core/Common"),h=a("../core/Events"),i=a("../geometry/Vector");!function(){var a,b;"undefined"!=typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(g.now())},1e3/60)},b=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),d.create=function(a){g.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var b={controller:d,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},c=g.extend(b,a),e=!c.options.wireframes&&"transparent"===c.options.background;return c.pixiOptions=c.pixiOptions||{view:c.canvas,transparent:e,antialias:!0,backgroundColor:a.background},c.mouse=a.mouse,c.engine=a.engine,c.renderer=c.renderer||new PIXI.WebGLRenderer(c.options.width,c.options.height,c.pixiOptions),c.container=c.container||new PIXI.Container,c.spriteContainer=c.spriteContainer||new PIXI.Container,c.canvas=c.canvas||c.renderer.view,c.bounds=c.bounds||{min:{x:0,y:0},max:{x:c.options.width,y:c.options.height}},h.on(c.engine,"beforeUpdate",function(){d.clear(c)}),c.textures={},c.sprites={},c.primitives={},c.container.addChild(c.spriteContainer),g.isElement(c.element)?c.element.appendChild(c.canvas):g.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),c.canvas.oncontextmenu=function(){return!1},c.canvas.onselectstart=function(){return!1},c},d.run=function(b){!function c(e){b.frameRequestId=a(c),d.world(b)}()},d.stop=function(a){b(a.frameRequestId)},d.clear=function(a){for(var b=a.container,c=a.spriteContainer;b.children[0];)b.removeChild(b.children[0]);for(;c.children[0];)c.removeChild(c.children[0]);var d=a.sprites["bg-0"];a.textures={},a.sprites={},a.primitives={},a.sprites["bg-0"]=d,d&&b.addChildAt(d,0),a.container.addChild(a.spriteContainer),a.currentBackground=null,b.scale.set(1,1),b.position.set(0,0)},d.setBackground=function(a,b){if(a.currentBackground!==b){var c=b.indexOf&&b.indexOf("#")!==-1,d=a.sprites["bg-0"];if(c){var e=g.colorToNumber(b);a.renderer.backgroundColor=e,d&&a.container.removeChild(d)}else if(!d){var f=k(a,b);d=a.sprites["bg-0"]=new PIXI.Sprite(f),d.position.x=0,d.position.y=0,a.container.addChildAt(d,0)}a.currentBackground=b}},d.world=function(a){var n,b=a.engine,c=b.world,g=a.renderer,h=a.container,j=a.options,k=f.allBodies(c),l=f.allConstraints(c),m=[];j.wireframes?d.setBackground(a,j.wireframeBackground):d.setBackground(a,j.background);var o=a.bounds.max.x-a.bounds.min.x,p=a.bounds.max.y-a.bounds.min.y,q=o/a.options.width,r=p/a.options.height;if(j.hasBounds){for(n=0;n<k.length;n++){var s=k[n];s.render.sprite.visible=e.overlaps(s.bounds,a.bounds)}for(n=0;n<l.length;n++){var t=l[n],u=t.bodyA,v=t.bodyB,w=t.pointA,x=t.pointB;u&&(w=i.add(u.position,t.pointA)),v&&(x=i.add(v.position,t.pointB)),w&&x&&(e.contains(a.bounds,w)||e.contains(a.bounds,x))&&m.push(t)}h.scale.set(1/q,1/r),h.position.set(-a.bounds.min.x*(1/q),-a.bounds.min.y*(1/r))}else m=l;for(n=0;n<k.length;n++)d.body(a,k[n]);for(n=0;n<m.length;n++)d.constraint(a,m[n]);g.render(h)},d.constraint=function(a,b){var d=(a.engine,b.bodyA),e=b.bodyB,f=b.pointA,h=b.pointB,i=a.container,j=b.render,k="c-"+b.id,l=a.primitives[k];return l||(l=a.primitives[k]=new PIXI.Graphics),j.visible&&b.pointA&&b.pointB?(g.indexOf(i.children,l)===-1&&i.addChild(l),l.clear(),l.beginFill(0,0),l.lineStyle(j.lineWidth,g.colorToNumber(j.strokeStyle),1),d?l.moveTo(d.position.x+f.x,d.position.y+f.y):l.moveTo(f.x,f.y),e?l.lineTo(e.position.x+h.x,e.position.y+h.y):l.lineTo(h.x,h.y),void l.endFill()):void l.clear()},d.body=function(a,b){var e=(a.engine,b.render);if(e.visible)if(e.sprite&&e.sprite.texture){var f="b-"+b.id,h=a.sprites[f],i=a.spriteContainer;h||(h=a.sprites[f]=c(a,b)),g.indexOf(i.children,h)===-1&&i.addChild(h),h.position.x=b.position.x,h.position.y=b.position.y,h.rotation=b.angle,h.scale.x=e.sprite.xScale||1,h.scale.y=e.sprite.yScale||1}else{var k="b-"+b.id,l=a.primitives[k],m=a.container;l||(l=a.primitives[k]=j(a,b),l.initialAngle=b.angle),g.indexOf(m.children,l)===-1&&m.addChild(l),l.position.x=b.position.x,l.position.y=b.position.y,l.rotation=b.angle-l.initialAngle}};var c=function(a,b){var c=b.render,d=c.sprite.texture,e=k(a,d),f=new PIXI.Sprite(e);return f.anchor.x=b.render.sprite.xOffset,f.anchor.y=b.render.sprite.yOffset,f},j=function(a,b){var l,c=b.render,d=a.options,e=new PIXI.Graphics,f=g.colorToNumber(c.fillStyle),h=g.colorToNumber(c.strokeStyle),i=g.colorToNumber(c.strokeStyle),j=g.colorToNumber("#bbb"),k=g.colorToNumber("#CD5C5C");e.clear();for(var m=b.parts.length>1?1:0;m<b.parts.length;m++){l=b.parts[m],d.wireframes?(e.beginFill(0,0),e.lineStyle(1,j,1)):(e.beginFill(f,1),e.lineStyle(c.lineWidth,h,1)),e.moveTo(l.vertices[0].x-b.position.x,l.vertices[0].y-b.position.y);for(var n=1;n<l.vertices.length;n++)e.lineTo(l.vertices[n].x-b.position.x,l.vertices[n].y-b.position.y);e.lineTo(l.vertices[0].x-b.position.x,l.vertices[0].y-b.position.y),e.endFill(),(d.showAngleIndicator||d.showAxes)&&(e.beginFill(0,0),d.wireframes?e.lineStyle(1,k,1):e.lineStyle(1,i),e.moveTo(l.position.x-b.position.x,l.position.y-b.position.y),e.lineTo((l.vertices[0].x+l.vertices[l.vertices.length-1].x)/2-b.position.x,(l.vertices[0].y+l.vertices[l.vertices.length-1].y)/2-b.position.y),e.endFill())}return e},k=function(a,b){var c=a.textures[b];return c||(c=a.textures[b]=PIXI.Texture.fromImage(b)),c}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)});